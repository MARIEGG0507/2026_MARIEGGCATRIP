/* Chosen Palette: Earthy Calm (奶油系基底) */
:root {
    /* ----- 1. 基礎色調 (Base Colors) ----- */
    --bg-warm: #fbf7f2;          /* 奶油白背景 */
    --card-bg: #ffffff;
    --border-soft: #efe6d8;      /* 柔和邊框 */

    /* ----- 2. 文字色調 (Text Colors) ----- */
    --text-primary: #3a3a3a;
    --text-secondary: #6b6b6b;
    --text-muted: #a0a0a0;       /* 新增：用於日期/次要資訊 */
    --text-link: #4a4a4a;        /* 景點連結/一般連結 */

    /* ----- 3. 強調色 (Accent Colors) ----- */
    --accent-main: #d6b98c;      /* 主強調色：奶茶金 */
    --accent-main-dark: #c3a36f; /* 主強調色：深色 */
    --accent-light: #f5ece2;     /* 新增：強調色淺色背景 (如按鈕hover/active) */

    /* ----- 4. 輔助色 (Soft Utilities) ----- */
    --accent-soft-blue: #cfdde6; /* 軟藍色 */
    --accent-soft-green: #d9e5d8;/* 軟綠色 */
    --scroll-thumb: #c9c3ba;     /* 新增：捲軸滑塊色 (更接近大地色系) */
    --scroll-track: #f0f0f0;     /* 新增：捲軸軌道色 */
}

/* 確保所有元素都採用 border-box 模型，利於佈局 */
*, *::before, *::after {
    box-sizing: border-box;
}

/* --- 全局設定 --- */
body {
    background-color: var(--bg-warm);
    color: var(--text-primary);
    /* 調整字體棧：強調優雅與清晰 */
    font-family: 'Noto Sans TC', 'Helvetica Neue', Helvetica, Arial, sans-serif; 
    line-height: 1.6; /* 增加行高，提升閱讀性 */
}

/* --- 佈局與元件 --- */

/* 圖表容器 (Chart Container) */
.chart-container {
    position: relative;
    width: 100%;
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
    height: 300px;
    max-height: 400px;
}
@media (min-width: 768px) {
    .chart-container {
        height: 350px;
    }
}

/* Tab 導航啟用狀態 (Tab Navigation Active State) */
.tab-active {
    /* 使用主強調色作為下邊框 */
    border-bottom: 3px solid var(--accent-main); 
    /* 顏色改為文字主色或深色強調色，避免使用硬編碼黃色 */
    color: var(--accent-main-dark); 
    font-weight: 700; /* 使用更明確的數值 */
}

/* 卡片懸停效果 (Card Hover Effect) */
.card-hover {
    /* 增強背景色變動的過渡，讓效果更柔和 */
    transition: transform 0.2s ease-out, box-shadow 0.2s ease-out, background-color 0.2s;
    background-color: var(--card-bg); /* 確保基礎背景色 */
    border-radius: 0.75rem; /* 確保圓角 */
}
.card-hover:hover {
    transform: translateY(-4px);
    /* 陰影調整：更柔和的擴散，符合 MUJI/奶油系風格 */
    box-shadow: 0 8px 16px -4px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.03);
    background-color: var(--accent-light); /* 輕微提亮背景 */
}

/* 自訂捲軸樣式 (Custom Scrollbar) */
.custom-scroll::-webkit-scrollbar {
    width: 8px; /* 捲軸寬度稍增 */
    height: 8px; /* 處理橫向捲軸 */
}
.custom-scroll::-webkit-scrollbar-track {
    background: var(--scroll-track);
}
.custom-scroll::-webkit-scrollbar-thumb {
    background: var(--scroll-thumb); /* 使用變數 */
    border-radius: 4px; /* 調整圓角 */
}
.custom-scroll::-webkit-scrollbar-thumb:hover {
    background: var(--accent-main-dark); /* 懸停時使用深色強調色 */
}

/* 景點連結樣式 (Attraction Link Style) */
.attraction-link {
    color: var(--text-link); /* 使用連結變數 */
    text-decoration: none; /* 預設無下劃線 */
    transition: color 0.2s;
}
.attraction-link:hover {
    color: var(--accent-main-dark); /* 懸停時變色 */
    text-decoration: underline; /* 懸停時出現下劃線 */
}


/* 漸入動畫 (Fade-In Animation) */
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}
.animate-fade-in {
    animation: fadeIn 0.5s ease-out;
}

/* --- 3-Day Weather (MUJI Style) --- */

.weather-card {
    /* 使用變數確保風格一致性 */
    background-color: var(--card-bg); 
    border: 1px solid var(--border-soft);
    border-radius: 0.75rem; 
    padding: 0.75rem 0.5rem; /* 調整 padding，讓內容更緊湊 */
    text-align: center;
    /* 調整最小寬度以容納內容 */
    min-width: 75px; 
    transition: box-shadow 0.3s;
}
.weather-card:hover {
    /* 懸停輕微陰影，增加互動感 */
    box-shadow: 0 2px 4px -1px rgba(0, 0, 0, 0.05); 
}

.weather-icon {
    font-size: 1.5rem; /* 略微加大圖標 */
    margin-bottom: 0.25rem;
}

.weather-date {
    font-size: 0.65rem; /* 略微縮小日期文字 */
    color: var(--text-muted); /* 使用 muted 變數 */
    margin-bottom: 0.25rem;
}

.weather-temp {
    font-size: 0.95rem; /* 略微加大溫度文字 */
    font-weight: 600; /* 略微加粗 */
}

/* --- 天氣佈局優化 --- */

/* 確保天氣卡片容器的 flex 行為 */
#weather-3day > .flex {
    flex-wrap: wrap; 
    justify-content: flex-start;
    gap: 0.5rem; /* 新增間距變數或硬編碼，確保卡片間有足夠間隙 */
}
#weather-3day .weather-card {
    flex: 1 1 calc(33.333% - 0.75rem); 
    min-width: 80px;
    max-width: 100%;
    margin: 0; /* 移除可能的 margin 影響 */
}

/* 手機優化 */
@media (max-width: 640px) {
    #weather-3day .weather-card {
        /* 手機上使用 45% + 間距，保證能放兩張 */
        flex: 1 1 calc(50% - 0.5rem); 
    }
}


/* --- 行動裝置用戶體驗優化 (Mobile UX Optimizations) --- */

@media (max-width: 768px) {

    /* Hero 字級縮小 */
    h1 {
        /* 避免使用 !important，使用更精確的選擇器或結構 */
        font-size: 1.8rem; 
        line-height: 1.25;
    }
    
    /* 確保所有標題字體在手機上不會過大 */
    h2 {
        font-size: 1.4rem;
    }

    /* Sticky Nav 變成可滑動 */
    nav ul {
        flex-wrap: nowrap; 
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
        justify-content: flex-start;
        /* 新增：隱藏捲軸 */
        scrollbar-width: none;  /* For Firefox */
        -ms-overflow-style: none; /* For IE and Edge */
    }

    nav ul::-webkit-scrollbar {
        display: none; /* For Chrome, Safari and Opera */
    }

    nav ul li {
        flex-shrink: 0;
    }

    /* 主內容 padding 縮小 */
    main {
        padding-top: 1rem;
        padding-left: 1rem;
        padding-right: 1rem;
    }

    /* 行程區塊：取消左右分欄，改上下 */
    #itinerary .flex {
        flex-direction: column;
        height: auto;
    }

    /* Phase sidebar 改成橫向滑動 */
    #itinerary .md\:w-1\/3 {
        width: 100%;
        border-right: none;
        /* 邊框顏色使用變數 */
        border-bottom: 1px solid var(--border-soft); 
        overflow-x: auto;
        display: flex;
        padding-bottom: 0.5rem; /* 增加底部 padding，讓內容和邊框有空間 */
    }
    
    /* Phase 按鈕的父元素調整 */
    #itinerary .md\:w-1\/3 > div {
        display: flex;
        gap: 0.75rem;
        padding-left: 1rem; /* 靠左對齊時增加左側間距 */
    }

    /* 調整按鈕最小寬度，避免過寬 */
    #itinerary button[id^="nav-phase"] {
        min-width: 180px; 
    }

    /* 行程內容 padding 縮小 */
    #itinerary-details {
        padding: 0.5rem; 
    }

    /* 每日卡片 */
    #itinerary-details .p-5 {
        padding: 1rem; 
    }

    /* 天氣卡片允許橫滑 (Current/Hourly Weather) */
    #weather-current > .flex,
    #weather-sf > .flex,
    #weather-la > .flex {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
        padding-bottom: 0.5rem;
        /* 隱藏捲軸 */
        scrollbar-width: none;
        -ms-overflow-style: none;
    }
    
    #weather-current > .flex::-webkit-scrollbar,
    #weather-sf > .flex::-webkit-scrollbar,
    #weather-la > .flex::-webkit-scrollbar {
        display: none;
    }

    .weather-card {
        flex-shrink: 0; /* 確保卡片不會被擠壓 */
        min-width: 72px;
    }

    /* 景點卡片字距 */
    #attraction-grid p {
        font-size: 0.875rem;
        line-height: 1.5;
    }

    /* Footer 縮小 */
    footer {
        padding: 2rem 1rem;
    }
}
