<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>2026 ç¾è¥¿ï½œèˆŠé‡‘å±±èˆ‡æ´›æ‰ç£¯ä¹‹æ—…</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- å¼•å…¥ SheetJS ç”¨æ–¼è®€å– Excel -->
    <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js"></script>
    
    <!-- 
      Application Structure:
      Based on "Earthy Calm" Palette by User.
      Fused into the existing layout.
    -->
    <style>
        /* ==========================================================================
           Palette: Earthy Calm (å„ªåŒ–ç‰ˆ)
           ========================================================================== */
        :root {
            /* 1. åŸºç¤è‰² (Base Colors) */
            --color-bg-body: #fbf7f2;         /* å¥¶æ²¹ç™½èƒŒæ™¯ */
            --color-bg-card: #ffffff;         /* å¡ç‰‡èƒŒæ™¯ */
            --color-bg-secondary: #faf7f2;    /* ç•¥æ·±/æš–çš„èƒŒæ™¯ (ç”¨æ–¼å€å¡Šåˆ†éš”) */
            --color-border-soft: #efe6d8;     /* æŸ”å’Œé‚Šæ¡† */
            --color-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);

            /* 2. æ–‡å­—è‰² (Text Colors) */
            --color-text-primary: #3a3a3a;    
            --color-text-secondary: #6b6b6b;  
            --color-text-muted: #a09a93;      /* éœéŸ³/æç¤ºæ–‡å­— */
            --color-text-link-hover: #d6b98c; /* é€£çµæ‡¸åœæ”¹ç‚ºå¥¶èŒ¶é‡‘ */

            /* 3. ä¸»é¡Œè‰² (Accent Colors) */
            --color-accent-main: #d6b98c;     /* å¥¶èŒ¶é‡‘ */
            --color-accent-main-dark: #c3a36f;
            --color-accent-main-text: #a4855d;

            /* 4. è¼”åŠ©è‰² (Utility Colors) - èª¿æ•´ç‚ºæš–è‰²ç³»ä»¥æ­é… */
            --color-utility-blue: #cfdde6;    
            --color-utility-green: #d9e5d8;   
        }

        /* ==========================================================================
           A. å…¨åŸŸæ¨£å¼ (Global Styles)
           ========================================================================== */
        body {
            background-color: var(--color-bg-body);
            color: var(--color-text-primary);
            font-family: 'Inter', 'Helvetica Neue', Helvetica, Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
        }

        /* æ²è»¸å„ªåŒ– */
        .custom-scroll::-webkit-scrollbar {
            width: 6px;
            height: 6px; /* å¢åŠ æ©«å‘æ²è»¸é«˜åº¦ */
        }
        .custom-scroll::-webkit-scrollbar-track {
            background: var(--color-bg-body);
        }
        .custom-scroll::-webkit-scrollbar-thumb {
            background: var(--color-border-soft);
            border-radius: 3px;
        }
        .custom-scroll::-webkit-scrollbar-thumb:hover {
            background: var(--color-text-muted);
        }
        
        /* éš±è—é è¨­æ²è»¸ä½†åœ¨æ‰‹æ©Ÿä¸Šä¿æŒæ»‘å‹•åŠŸèƒ½ (Utility) */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        /* ==========================================================================
           B. å…ƒä»¶æ¨£å¼ (Components)
           ========================================================================== */

        /* æ´»èºæ¨™ç±¤ (ç”¨æ–¼èˆªç­åˆ‡æ›) */
        .tab-active {
            border-bottom: 3px solid var(--color-accent-main-dark);
            color: var(--color-text-primary) !important; 
            font-weight: 700;
            background-color: transparent !important;
            box-shadow: none !important;
            border-radius: 0 !important;
        }
        
        /* éæ´»èºæ¨™ç±¤ */
        .tab-inactive {
            color: var(--color-text-muted);
            border-bottom: 3px solid transparent;
        }

        /* å¡ç‰‡æ‡¸åœ */
        .card-hover {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            box-shadow: var(--color-shadow);
            border: 1px solid var(--color-border-soft);
            background-color: var(--color-bg-card);
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
            border-color: var(--color-accent-main);
        }

        /* æ™¯é»é€£çµ */
        .attraction-link {
            transition: color 0.2s ease;
            color: var(--color-text-primary);
        }
        .attraction-link:hover {
            color: var(--color-accent-main-text);
            text-decoration: underline;
        }

        /* å¤©æ°£å¡ç‰‡ */
        .weather-card {
            background-color: var(--color-bg-secondary);
            border: 1px solid var(--color-border-soft);
            border-radius: 0.75rem;
            padding: 0.75rem 0.5rem;
            text-align: center;
            min-width: 80px; /* ç¢ºä¿åœ¨æ‰‹æ©Ÿä¸Šæœ‰å¯¬åº¦ */
        }
        .weather-icon { font-size: 1.6rem; margin-bottom: 0.25rem; }
        .weather-date { font-size: 0.75rem; color: var(--color-text-muted); font-weight: 600; }
        .weather-temp { font-size: 1rem; font-weight: 700; color: var(--color-text-primary); }

        /* ç½®é ‚æŒ‰éˆ•æ¨£å¼ (èåˆç‰ˆ) */
        .scroll-to-top-btn {
            position: fixed;
            bottom: 1.5rem;
            right: 1.5rem;
            z-index: 50;
            background-color: rgba(255,255,255,0.8);
            backdrop-filter: blur(4px);
            color: var(--color-accent-main-dark);
            width: 3rem;
            height: 3rem;
            border-radius: 9999px;
            border: 2px solid var(--color-accent-main);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            cursor: pointer;
        }
        .scroll-to-top-btn:hover {
            background-color: var(--color-accent-main);
            color: white;
            transform: translateY(-3px);
        }

        /* Excel æŒ‰éˆ•æ¨£å¼ */
        .excel-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            border-radius: 9999px;
            font-size: 0.875rem;
            font-weight: 700;
            transition: all 0.2s ease;
            cursor: pointer;
            border: 1px solid transparent;
        }
        .excel-btn-primary {
            background-color: #107c41; /* Excel Green */
            color: white;
        }
        .excel-btn-primary:hover {
            background-color: #0c5e31;
            transform: translateY(-1px);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .excel-btn-secondary {
            background-color: white;
            color: #107c41;
            border-color: #107c41;
        }
        .excel-btn-secondary:hover {
            background-color: #f0fdf4;
        }

        /* ==========================================================================
           E. å±•é–‹/æ”¶åˆå‹•ç•« (Expand/Collapse Animations) - NEW
           ========================================================================== */
        .expandable-content {
            max-height: 0;
            overflow: hidden;
            opacity: 0;
            transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1), 
                        opacity 0.3s ease-in,
                        margin-top 0.3s ease;
        }
        .expandable-content.open {
            max-height: 500px; /* è¶³å¤ å¤§çš„é«˜åº¦ä»¥å®¹ç´å…§å®¹ */
            opacity: 1;
            margin-top: 1rem;
        }
        .rotate-icon {
            transition: transform 0.3s ease;
            display: inline-block;
        }
        .rotate-icon.open {
            transform: rotate(180deg);
        }

        /* ==========================================================================
           C. å‹•ç•« (Animations)
           ========================================================================== */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
            animation: fadeIn 0.6s ease-out forwards;
        }
        @keyframes drawLine {
            from { height: 0; }
            to { height: 100%; }
        }
        .timeline-line {
            animation: drawLine 1s ease-out forwards;
            background-color: var(--color-border-soft);
        }

        /* ==========================================================================
           D. éŸ¿æ‡‰å¼å„ªåŒ– (Mobile UX Optimizations)
           ========================================================================== */
        @media (max-width: 768px) {
            /* æ¨™é¡Œç¸®å° */
            h1 { font-size: 1.8rem !important; }

            /* å°èˆªåˆ—æ”¹ç‚ºæ©«å‘æ»‘å‹• */
            nav ul {
                flex-wrap: nowrap !important;
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
                justify-content: flex-start !important;
                gap: 0.5rem;
                padding: 0.5rem 1rem;
            }
            nav ul li { flex-shrink: 0; }

            /* è¡Œç¨‹å€å¡Šæ”¹ç‚ºå‚ç›´æ’åˆ— */
            #itinerary-container { flex-direction: column !important; height: auto !important; }
            
            /* éšæ®µå°èˆªæ©«å‘æ»¾å‹• */
            #phase-nav-container {
                width: 100% !important;
                border-right: none !important;
                border-bottom: 1px solid var(--color-border-soft);
                overflow-x: auto;
                display: flex;
                padding: 1rem;
                gap: 1rem;
            }
            /* è®“ JS å‹•æ…‹ç”Ÿæˆçš„æŒ‰éˆ•åœ¨æ‰‹æ©Ÿç‰ˆä¹Ÿæœ‰å›ºå®šå¯¬åº¦ */
            .phase-nav-btn { min-width: 260px; flex-shrink: 0; }

            /* å¤©æ°£å¡ç‰‡æ©«æ»‘ */
            #weather-current, #weather-sf, #weather-la {
                overflow-x: auto;
                display: flex;
                gap: 0.5rem;
                padding-bottom: 0.5rem;
                flex-wrap: nowrap !important;
            }
        }
    </style>
</head>
<body>

    <!-- Hero Section -->
    <header class="bg-white shadow-sm border-b border-[#efe6d8] relative overflow-hidden">
        <!-- èª¿æ•´æ¼¸å±¤ç‚ºæš–è‰²èª¿ä»¥é…åˆä¸»é¡Œ -->
        <div class="absolute inset-0 bg-gradient-to-r from-[#fbf7f2] via-[#faf0e6] to-[#f3e5d8] opacity-80"></div>
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 text-center relative z-10">
            <h1 class="text-4xl font-extrabold tracking-tight text-[#5c4d3c] sm:text-6xl mb-4">
                ç¾è¥¿èˆŠé‡‘å±±èˆ‡æ´›æ‰ç£¯ä¹‹æ—…
            </h1>
            <p class="text-xl text-[#8c7b66] mb-6 font-light">
                2026å¹´ 2æœˆ26æ—¥ - 3æœˆ11æ—¥ <span class="mx-2 text-[#d6b98c]">|</span> 13 å¤© 12 å¤œ <span class="mx-2 text-[#d6b98c]">|</span> åŠ å·å¤¢å¹»è¡Œ
            </p>                       
        </div>
    </header>

    <!-- Navigation -->
    <nav class="sticky top-0 z-50 bg-[#fbf7f2]/95 backdrop-blur-md shadow-sm border-b border-[#efe6d8] transition-all duration-300">
        <div class="max-w-7xl mx-auto px-0 md:px-4">
            <!-- ç§»é™¤ justify-center ä»¥é…åˆæ‰‹æ©Ÿç‰ˆæ©«å‘æ²å‹•çš„æ¨£å¼ -->
            <ul class="flex md:justify-center h-auto md:h-16 items-center no-scrollbar">
              <li>
                  <button onclick="scrollToSection('logistics')" class="text-[#6b6b6b] hover:text-[#d6b98c] px-4 py-2 text-sm font-bold transition-colors whitespace-nowrap">
                      ğŸ›« è¡Œå‰æº–å‚™
                  </button>
              </li>

              <li>
                  <button onclick="scrollToSection('itinerary')" class="text-[#6b6b6b] hover:text-[#d6b98c] px-4 py-2 text-sm font-bold transition-colors whitespace-nowrap">
                     ğŸ—ºï¸ æ¯æ—¥è¡Œç¨‹
                  </button>
              </li>

              <li>
                  <button onclick="scrollToSection('dining')" class="text-[#6b6b6b] hover:text-[#d6b98c] px-4 py-2 text-sm font-bold transition-colors whitespace-nowrap">
                     ğŸ½ï¸ ç¾é£Ÿæ¨è–¦
                  </button>
              </li>

              <li>
                  <button onclick="scrollToSection('highlights')" class="text-[#6b6b6b] hover:text-[#d6b98c] px-4 py-2 text-sm font-bold transition-colors whitespace-nowrap">
                     ğŸ›ï¸ æ™¯é»æ¢ç´¢
                  </button>
              </li>

              <li class="hidden md:block w-px h-6 bg-[#efe6d8] mx-2"></li>

              <li>
                  <a href="disneyland_itinerary.html" target="_blank"
                     class="text-[#a4855d] hover:text-[#c3a36f] px-4 py-2 text-sm font-bold transition-colors flex items-center gap-1 bg-white border border-[#efe6d8] rounded-full mx-2 whitespace-nowrap shadow-sm hover:shadow-md">
                      <span>ğŸ°</span> è¿ªå£«å°¼
                  </a>
              </li>
              <li>
                  <a href="universal_hollywood.html" target="_blank"
                     class="text-[#a4855d] hover:text-[#c3a36f] px-4 py-2 text-sm font-bold transition-colors flex items-center gap-1 bg-white border border-[#efe6d8] rounded-full whitespace-nowrap shadow-sm hover:shadow-md">
                      <span>ğŸ¥</span> ç’°çƒå½±åŸ
                  </a>
              </li>
          </ul>

        </div>
    </nav>

    <main class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10 w-full space-y-24">

        <!-- Section 1: Logistics Hub -->
        <section id="logistics" class="scroll-mt-24">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-[#3a3a3a] inline-block relative z-10">
                    ğŸ›« è¡Œå‰æº–å‚™èˆ‡è³‡è¨Š
                    <!-- è£é£¾åº•ç·šæ”¹ç‚ºå¥¶èŒ¶é‡‘ -->
                    <div class="absolute bottom-0 left-0 w-full h-3 bg-[#d6b98c] opacity-20 -z-10 transform translate-y-1"></div>
                </h2>
                <p class="mt-4 text-[#6b6b6b] max-w-2xl mx-auto">
                    åŒ…å«èˆªç­æ™‚é–“ã€å¿…å‚™æ–‡ä»¶æª¢æŸ¥ã€ä»¥åŠç•¶åœ°å¤©æ°£é æ¸¬ã€‚
                </p>
            </div>
 
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- Flight Info -->
                <div class="bg-white rounded-2xl shadow-[0_4px_10px_rgba(0,0,0,0.05)] p-8 border border-[#efe6d8]">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-xl font-bold text-[#3a3a3a] flex items-center gap-2">
                            <span class="bg-[#faf7f2] text-[#d6b98c] p-2 rounded-lg text-lg">âœˆï¸</span> èˆªç­è³‡è¨Š
                        </h3>
                        <!-- Tab Buttons using new Styles -->
                        <div class="flex space-x-4 border-b border-[#efe6d8] px-2">
                            <button onclick="switchFlightTab('outbound')" id="btn-outbound" class="tab-active text-sm transition-all pb-2">å»ç¨‹</button>
                            <button onclick="switchFlightTab('inbound')" id="btn-inbound" class="tab-inactive text-sm transition-all pb-2 hover:text-[#3a3a3a]">å›ç¨‹</button>
                        </div>
                    </div>
                    
                    <div id="flight-content" class="space-y-4">
                        <!-- Dynamic Content Loaded via JS -->
                    </div>
                </div>
            
                <!-- Weather & Tips -->
                <div class="bg-white rounded-2xl shadow-[0_4px_10px_rgba(0,0,0,0.05)] p-8 border border-[#efe6d8]">
                  <h3 class="text-xl font-bold text-[#3a3a3a] mb-6 flex items-center gap-2">
                      <span class="bg-[#faf7f2] text-[#d6b98c] p-2 rounded-lg text-lg">â˜€ï¸</span> æ‰€åœ¨åœ°å€ãƒ»æœªä¾† 3 å¤©å¤©æ°£
                  </h3>

                  <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                      <!-- Current Location -->
                      <div class="bg-[#faf7f2] rounded-xl p-4 border border-[#efe6d8]">
                          <h4 class="text-xs font-bold text-[#a09a93] mb-2 uppercase tracking-wide">ç›®å‰æ‰€åœ¨åœ°</h4>
                          <p class="text-xs text-[#6b6b6b] mb-3 truncate font-bold" id="current-city">å®šä½ä¸­â€¦</p>
                          <div id="weather-current" class="flex gap-2 justify-center"></div>
                          <p id="wear-current" class="text-xs text-[#a4855d] mt-3 font-medium text-center"></p>
                      </div>

                      <!-- San Francisco -->
                      <div class="bg-white rounded-xl p-4 border border-[#efe6d8]">
                          <h4 class="text-xs font-bold text-[#a09a93] mb-2 uppercase tracking-wide">èˆŠé‡‘å±± SF</h4>
                          <div id="weather-sf" class="flex gap-2 justify-center mt-1"></div>
                          <p id="wear-sf" class="text-xs text-[#a4855d] mt-3 font-medium text-center"></p>
                      </div>

                      <!-- Los Angeles -->
                      <div class="bg-white rounded-xl p-4 border border-[#efe6d8]">
                          <h4 class="text-xs font-bold text-[#a09a93] mb-2 uppercase tracking-wide">æ´›æ‰ç£¯ LA</h4>
                          <div id="weather-la" class="flex gap-2 justify-center mt-1"></div>
                          <p id="wear-la" class="text-xs text-[#a4855d] mt-3 font-medium text-center"></p>
                      </div>
                  </div>
              </div>               
            </div>
            <!-- ACCOMMODATION SUMMARY -->
            <div class="mt-8 bg-white rounded-2xl shadow-[0_4px_10px_rgba(0,0,0,0.05)] p-8 border border-[#efe6d8]">

                <h3 class="text-xl font-bold text-[#3a3a3a] mb-6 flex items-center gap-2">
                    <span class="bg-[#faf7f2] text-[#d6b98c] p-2 rounded-lg text-lg">ğŸ¨</span> ä½å®¿è¦åŠƒ
                </h3>

                <div id="accommodation-content"
                     class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                    <!-- Dynamic Content Loaded via JS -->
                </div>

            </div>           
            <!-- Essential Checklist Grid -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mt-8">
                <article class="bg-[#faf7f2] p-6 rounded-2xl border border-[#efe6d8] hover:shadow-md transition-all">
                    <div class="text-3xl mb-3">ğŸ“„</div>
                    <h4 class="font-bold text-[#3a3a3a] text-lg">è­‰ä»¶æª¢æŸ¥</h4>
                    <p class="text-sm text-[#6b6b6b] mt-2 leading-relaxed">è­·ç…§ã€ESTAã€åœ‹éš›é§•ç…§ã€å°ç£é§•ç…§æ­£æœ¬ã€‚</p>
                </article>
                <article class="bg-[#faf7f2] p-6 rounded-2xl border border-[#efe6d8] hover:shadow-md transition-all">
                    <div class="text-3xl mb-3">ğŸ’µ</div>
                    <h4 class="font-bold text-[#3a3a3a] text-lg">è²¨å¹£å°è²»</h4>
                    <p class="text-sm text-[#6b6b6b] mt-2 leading-relaxed">ä½¿ç”¨ USDã€‚é¤å»³å°è²»ç´„ 15-20%ã€‚æ¨™åƒ¹ä¸å«ç¨…ã€‚</p>
                </article>
                <article class="bg-[#faf7f2] p-6 rounded-2xl border border-[#efe6d8] hover:shadow-md transition-all">
                    <div class="text-3xl mb-3">ğŸ“±</div>
                    <h4 class="font-bold text-[#3a3a3a] text-lg">ç¶²è·¯é€šè¨Š</h4>
                    <p class="text-sm text-[#6b6b6b] mt-2 leading-relaxed">æå‰è³¼è²· SIM å¡æˆ–ç§Ÿå€Ÿ Wi-Fi æ©Ÿã€‚æ™‚å€æ…¢ 16 å°æ™‚ã€‚</p>
                </article>
                <article class="bg-[#faf7f2] p-6 rounded-2xl border border-[#efe6d8] hover:shadow-md transition-all">
                    <div class="text-3xl mb-3">ğŸš—</div>
                    <h4 class="font-bold text-[#3a3a3a] text-lg">äº¤é€šé ˆçŸ¥</h4>
                    <p class="text-sm text-[#6b6b6b] mt-2 leading-relaxed">SFæ­å¤§çœ¾é‹è¼¸ï¼›LAæ­Uberï¼›PCHè‡ªé§•å‰æŸ¥è·¯æ³ã€‚</p>
                </article>
            </div>
        </section>

        <!-- Section 2: Itinerary -->
        <section id="itinerary" class="scroll-mt-24">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold text-[#3a3a3a] inline-block relative z-10">
                    ğŸ—ºï¸ 13 å¤©æ—…ç¨‹è¦åŠƒ
                    <div class="absolute bottom-0 left-0 w-full h-3 bg-[#a5b4fc] opacity-20 -z-10 transform translate-y-1"></div>
                </h2>
                <p class="mt-4 text-[#6b6b6b] max-w-2xl mx-auto">
                    è¡Œç¨‹åˆ†ç‚ºä¸‰å¤§ä¸»é¡Œéšæ®µã€‚é»é¸å·¦å´å¯åˆ‡æ›æŸ¥çœ‹è©³ç´°æ™‚é–“è»¸èˆ‡äº®é»ã€‚
                </p>
                
                <!-- åŸæœ¬çš„ Excel Controls å·²ç§»é™¤ï¼Œç§»å‹•è‡³é å°¾ -->
            </div>

            <!-- ä½¿ç”¨æ–°çš„ ID "itinerary-container" ä¾†é…åˆéŸ¿æ‡‰å¼ CSS -->
            <div id="itinerary-container" class="bg-white rounded-3xl shadow-[0_10px_30px_rgba(0,0,0,0.05)] overflow-hidden border border-[#efe6d8] flex flex-col md:flex-row md:h-[750px]">
                <!-- Sidebar: Phases (Dynamic) -->
                <div id="phase-nav-container" class="w-full md:w-1/3 bg-[#fbf7f2] border-r border-[#efe6d8] md:overflow-y-auto custom-scroll z-10">
                    <div id="phase-nav-content" class="p-4 md:p-6 space-y-4 md:block">
                        <!-- Dynamic Content injected via JS (renderSidebar) -->
                    </div>
                </div>

                <!-- Content: Daily Details -->
                <div class="w-full md:w-2/3 bg-white relative">
                    <!-- Sticky Header inside Content -->
                    <div id="itinerary-header" class="sticky top-0 z-20 bg-white/95 backdrop-blur border-b border-[#efe6d8] px-8 py-4 flex justify-between items-center shadow-sm">
                        <!-- Dynamic Header Content -->
                    </div>
                    
                    <div class="p-6 md:p-8 md:overflow-y-auto custom-scroll h-[calc(100%-80px)]">
                        <div id="itinerary-details" class="pl-4 border-l-2 border-[#efe6d8] md:border-none">
                            <!-- Content injected via JS -->
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section: Dining Guide -->
        <section id="dining" class="scroll-mt-24">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-[#3a3a3a] inline-block relative z-10">
                    ğŸ½ï¸ ç²¾é¸é¤å»³æ¨è–¦
                    <div class="absolute bottom-0 left-0 w-full h-3 bg-[#d9e5d8] opacity-50 -z-10 transform translate-y-1"></div>
                </h2>
                <p class="mt-4 text-[#6b6b6b] max-w-2xl mx-auto">
                    å¾èˆŠé‡‘å±±çš„ç¶“å…¸é…¸éºµåŒ…æ¿ƒæ¹¯åˆ°æ´›æ‰ç£¯çš„å¿…åƒæ¼¢å ¡ï¼Œç‚ºæ‚¨ç²¾é¸åœ¨åœ°é¢¨å‘³ã€‚
                </p>
            </div>

            <!-- Dining Filters -->
            <div class="flex flex-wrap justify-center gap-2 mb-10">
                 <button onclick="filterDining('all')" class="dining-filter-btn px-6 py-2 rounded-full text-sm font-bold shadow-sm transition-all transform hover:scale-105" data-filter="all">å…¨éƒ¨</button>
                 <button onclick="filterDining('SF')" class="dining-filter-btn px-6 py-2 rounded-full text-sm font-bold shadow-sm transition-all transform hover:scale-105" data-filter="SF">ğŸŒ‰ èˆŠé‡‘å±±</button>
                 <button onclick="filterDining('PCH')" class="dining-filter-btn px-6 py-2 rounded-full text-sm font-bold shadow-sm transition-all transform hover:scale-105" data-filter="PCH">ğŸŒŠ ä¸€è™Ÿå…¬è·¯</button>
                 <button onclick="filterDining('LA')" class="dining-filter-btn px-6 py-2 rounded-full text-sm font-bold shadow-sm transition-all transform hover:scale-105" data-filter="LA">ğŸ” æ´›æ‰ç£¯</button>
            </div>

            <!-- Dining Grid -->
            <div id="dining-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Content injected via JS -->
            </div>
        </section>

        <!-- Section 3: Highlights -->
        <section id="highlights" class="scroll-mt-24">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-[#3a3a3a] inline-block relative z-10">
                    ğŸ›ï¸ ç²¾é¸æ™¯é»æ¢ç´¢
                    <div class="absolute bottom-0 left-0 w-full h-3 bg-[#fef3c7] opacity-50 -z-10 transform translate-y-1"></div>
                </h2>
                <p class="mt-4 text-[#6b6b6b] max-w-2xl mx-auto">
                    æ¢ç´¢æœ¬æ¬¡æ—…ç¨‹çš„å¿…è¨ªäº®é»ã€‚**é»æ“Šä¸‹æ–¹æ™¯é»å¡ç‰‡å³å¯å‰å¾€å®˜æ–¹ç¶²ç«™ã€‚**
                </p>
            </div>

            <!-- Filters -->
            <div class="flex flex-wrap justify-center gap-2 mb-10">
                <button onclick="filterAttractions('all')" class="filter-btn px-6 py-2 rounded-full text-sm font-bold shadow-sm transition-all transform hover:scale-105" data-filter="all">å…¨éƒ¨é¡¯ç¤º</button>
                <button onclick="filterAttractions('SF')" class="filter-btn px-6 py-2 rounded-full text-sm font-bold shadow-sm transition-all transform hover:scale-105" data-filter="SF">ğŸŒ‰ èˆŠé‡‘å±±</button>
                <button onclick="filterAttractions('Yosemite')" class="filter-btn px-6 py-2 rounded-full text-sm font-bold shadow-sm transition-all transform hover:scale-105" data-filter="Yosemite">ğŸŒ² å„ªå‹ç¾åœ°</button>
                <button onclick="filterAttractions('PCH')" class="filter-btn px-6 py-2 rounded-full text-sm font-bold shadow-sm transition-all transform hover:scale-105" data-filter="PCH">ğŸŒŠ ä¸€è™Ÿå…¬è·¯</button>
                <button onclick="filterAttractions('LA')" class="filter-btn px-6 py-2 rounded-full text-sm font-bold shadow-sm transition-all transform hover:scale-105" data-filter="LA">ğŸ¬ æ´›æ‰ç£¯</button>
            </div>

            <!-- Grid -->
            <div id="attraction-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Content injected via JS -->
            </div>
        </section>

    </main>

    <footer class="bg-[#2c241b] text-white py-16 mt-12">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <div class="text-4xl mb-6">ğŸ‡ºğŸ‡¸</div>
            <h3 class="text-2xl font-bold mb-2 tracking-wider">2026 ç¾è¥¿ä¹‹æ—…</h3>
            <p class="text-[#a09a93]">ç¥æ‚¨çš„æ—…ç¨‹å……æ»¿ç¾å¥½å›æ†¶ï¼</p>
            <div class="w-12 h-1 bg-[#5c4d3c] mx-auto my-8 rounded-full"></div>
            <div class="text-xs text-[#5c4d3c] mb-8">
                Designed with Earthy Calm Theme
            </div>

            <!-- New: Stealthy Excel Controls in Footer -->
            <div class="inline-block px-6 py-4 rounded-2xl border border-[#3e3429] bg-[#251e16]">
                <p class="text-[10px] text-[#5c4d3c] mb-3 font-bold uppercase tracking-widest">è¡Œç¨‹ç®¡ç†å¾Œå°</p>
                <div class="flex flex-wrap justify-center gap-3">
                    <input type="file" id="excel-upload" accept=".xlsx, .xls" class="hidden" onchange="handleExcelUpload(this)" />
                    <label for="excel-upload" class="cursor-pointer px-3 py-1.5 rounded-md text-xs font-bold text-[#8c7b66] border border-[#5c4d3c] hover:bg-[#3e3429] hover:text-[#d6b98c] hover:border-[#d6b98c] transition-all flex items-center gap-2">
                        <span>ğŸ“‚</span> åŒ¯å…¥è³‡æ–™
                    </label>
                    
                    <button onclick="downloadTemplate()" class="cursor-pointer px-3 py-1.5 rounded-md text-xs font-bold text-[#8c7b66] border border-[#5c4d3c] hover:bg-[#3e3429] hover:text-[#d6b98c] hover:border-[#d6b98c] transition-all flex items-center gap-2">
                        <span>â¬‡ï¸</span> ä¸‹è¼‰ç¯„æœ¬
                    </button>
                </div>
                <p id="upload-status" class="text-[10px] text-[#a09a93] mt-2 hidden"></p>
            </div>
        </div>
    </footer>

    <!-- æ²å‹•è‡³é ‚éƒ¨æŒ‰éˆ• (ä½¿ç”¨æ–°æ¨£å¼) -->
    <button onclick="window.scrollTo({top:0,behavior:'smooth'})" class="scroll-to-top-btn">
        <span class="text-xl">â¬†ï¸</span>
    </button>

    <script>
        // --- Data Storage (All converted to LET for mutation) ---

        let flightData = {
            outbound: [
                { leg: "TPE âœ HKG", date: "2/26 20:15", arr: "22:00", note: "è½‰æ©Ÿ", number: "CX531" }, 
                { leg: "HKG âœ SFO", date: "2/26 01:00 (+1)", arr: "21:15 (2/26)", note: "éœ€èª¿æ•´æ™‚å·®", number: "CX872" }
            ],
            inbound: [
                { leg: "LAX âœ HKG", date: "3/09 22:15", arr: "05:05 (3/11)", note: "è·¨è¶Šåœ‹éš›æ›æ—¥ç·š", number: "CX883" },
                { leg: "HKG âœ TPE", date: "3/11 08:00", arr: "09:45 (3/11)", note: "æŠµé”æº«æš–çš„å®¶", number: "CX488" }
            ]
        };

        let accommodationData = [
            {
                city: "èˆŠé‡‘å±±",
                name: "Riu Plaza Fisherman's Wharf",
                checkinDate: "2026-02-26",
                checkoutDate: "2026-03-03",
                checkin: "15:00 èµ·",
                checkout: "12:00 å‰",
                room: "è±ªè¯åŠ å¤§é›™äººåºŠæˆ¿ï¼ˆ2 å¼µåŠ å¤§åºŠï¼‰",
                highlight: "ğŸ³ å«æ—©é¤ï½œğŸš­ ç¦è¸æˆ¿",
                facilities: "é«˜é€Ÿç¶²è·¯ã€ç§äººè¡›æµ´ã€ç©ºèª¿ã€ä¿éšªç®±ã€å†°ç®±ã€å’–å•¡æ©Ÿã€å¹é¢¨æ©Ÿ",
                address: "2500 Mason Street, San Francisco, CA 94133, USA",
                mapLink: "https://www.google.com/maps?q=37.80699906469404,-122.41348274052166"
            },
            {
                city: "è’™ç‰¹é›·",
                name: "éš†æ©æ©¡æœ¨é…’åº—",
                checkinDate: "2026-03-03",
                checkoutDate: "2026-03-04",
                checkin: "15:00ï½23:00",
                checkout: "05:00ï½11:00",
                room: "ç‰¹å¤§é›™äººåºŠæˆ¿ Ã— 2 é–“",
                highlight: "ğŸ½ï¸ ä¸å«é¤ï½œğŸš­ ç¦è¸æˆ¿",
                facilities: "ç§äººè¡›æµ´ã€ç©ºèª¿ã€éš”éŸ³ã€å¾®æ³¢çˆã€å†°ç®±ã€å’–å•¡æ©Ÿã€æš–æ°£",
                address: "2221 North Fremont Street, Monterey, CA 93940, USA",
                mapLink: "https://www.google.com/maps?q=36.5970385420236,-121.85806229710579"
            },
            {
                city: "è«ç¾…è²",
                name: "æµ·æ¸¯å±‹é…’åº—",
                checkinDate: "2026-03-04",
                checkoutDate: "2026-03-05",
                checkin: "15:00 èµ·",
                checkout: "11:00 å‰",
                room: "æµ·æ™¯è±ªè¯ç‰¹å¤§åºŠæˆ¿ Ã— 2 é–“",
                highlight: "ğŸŒŠ æµ·æ™¯é™½å°ï½œğŸš­ ç¦è¸æˆ¿",
                facilities: "ç§äººé™½å°ã€æµ·æ™¯ã€ç©ºèª¿ã€å¾®æ³¢çˆã€å’–å•¡æ©Ÿã€æš–æ°£",
                address: "1095 Main Street, Morro Bay, CA 93442, USA",
                mapLink: "https://www.google.com/maps?q=35.36818125561934,-120.85015922784805"
            },
            {
                city: "æ´›æ‰ç£¯",
                name: "Hollywood Franklin Hotel",
                checkinDate: "2026-03-05",
                checkoutDate: "2026-03-09",
                checkin: "15:00 èµ·",
                checkout: "11:00 å‰",
                room: "åŠ å¤§é›™äººåºŠæˆ¿ï¼ˆ2 å¼µåŠ å¤§åºŠï¼‰",
                highlight: "ğŸ¬ è¿‘ç’°çƒå½±åŸï½œğŸš­ ç¦è¸æˆ¿",
                facilities: "æ¸¸æ³³æ± ã€å¸‚æ™¯ã€ç©ºèª¿ã€å¾®æ³¢çˆã€å’–å•¡æ©Ÿã€ä¿éšªç®±",
                address: "6141 Franklin Avenue, Hollywood, Los Angeles, CA 90028, USA",
                mapLink: "https://www.google.com/maps?q=34.10539309099251,-118.32347273826599"
            }
        ];

        let diningData = [
            // SF
            { name: "Fog Harbor Fish House", city: "SF", type: "Seafood", desc: "æ¼äººç¢¼é ­æ’éšŠååº—ï¼Œæµ·é®®å“è³ªæ¥µä½³ï¼Œå¿…é»ç²ççš„ Clam Chowder (è›¤èœŠæ¿ƒæ¹¯)ã€Garlic Roasted Whole Dungeness Crab (è’œé¦™çƒ¤å¤§èƒèŸ¹)ã€‚", icon: "ğŸ¦€", url: "https://fogharbor.com/" },
            { name: "Boudin Bakery", city: "SF", type: "Classic", desc: "èˆŠé‡‘å±±é…¸éºµåŒ…å‰µå§‹åº—ï¼Œè›¤èœŠæ¿ƒæ¹¯ (Clam Chowder) æ˜¯è§€å…‰å®¢å¿…åšç¶“å…¸ã€‚", icon: "ğŸ¥£", url: "https://boudinbakery.com/" },
            { name: "Hog Island Oyster Co.", city: "SF", type: "Seafood", desc: "ä½æ–¼ Ferry Building å…§ï¼Œæä¾›æœ€æ–°é®®çš„ç”Ÿè ”èˆ‡çµ•ç¾æµ·ç£æ™¯è§€ã€‚", icon: "ğŸ¦ª", url: "https://hogislandoysters.com/" },
            { name: "In-N-Out Burger", city: "SF", type: "FastFood", desc: "åŠ å·çš„éˆé­‚ç¾é£Ÿï¼Œå¹³åƒ¹ã€æ–°é®®ã€åœ¨åœ°äººæœ€æ„›ã€‚æ¼äººç¢¼é ­åˆ†åº—æ˜¯å”¯ä¸€æœ‰é€™å®¶åˆ†åº—çš„è§€å…‰å€ã€‚</br>æ¨è–¦èœè‰²ï¼š Double-Double (é›™å±¤èµ·å¸å ¡)ã€‚</br>å…§è¡Œéš±è—é»æ³• (Secret Menu)ï¼š</br>â—Animal Styleï¼šæ¼¢å ¡è‚‰æœƒå¡—ä¸ŠèŠ¥æœ«ç…çƒ¤ï¼ŒåŠ å…¥é¡å¤–çš„ç‰¹è£½é†¬æ–™å’Œç¢çƒ¤æ´‹è”¥ã€‚</br>â—Protein Styleï¼šç”¨å¤§ç‰‡ç”Ÿèœä»£æ›¿éºµåŒ…</br>â—Animal Style Friesï¼šè–¯æ¢åŠ ä¸Šèµ·å¸ã€æ´‹è”¥å’Œç‰¹è£½é†¬ã€‚</br>èˆŠé‡‘å±±ï¼š 333 Jefferson St (å°±åœ¨ Riu Plaza é™„è¿‘ï¼Œæ­¥è¡Œå¯é”)ã€‚</br>æ´›æ‰ç£¯ï¼š 9149 S Sepulveda Blvd (å°±åœ¨ LAX æ©Ÿå ´æ—é‚Šï¼Œå¯ä»¥çœ‹åˆ°é£›æ©Ÿä½ç©ºæ éï¼Œéå¸¸é©åˆ D12 é›¢å¢ƒå‰åƒ)ã€‚", icon: "ğŸ”", url: "https://www.in-n-out.com/" },
            
            // PCH
            { name: "Dametra Cafe", city: "PCH", type: "Mediterranean", desc: "å¡æ¢…çˆ¾æ’åç¬¬ä¸€çš„åœ°ä¸­æµ·æ–™ç†ï¼Œæ°£æ°›æ­¡æ¨‚ï¼Œç¶“å¸¸æœ‰ç¾å ´éŸ³æ¨‚æ¼”å¥ã€‚", icon: "ğŸ¥—", url: "https://dametracafe.com/" },
            { name: "Passionfish", city: "PCH", type: "Seafood", desc: "å¤ªå¹³æ´‹å¢æ—å¸‚ (Pacific Grove) è©•åƒ¹æ¥µé«˜çš„æµ·é®®é¤å»³ï¼Œå¼·èª¿æ°¸çºŒæ¼æ³•ã€‚", icon: "ğŸŸ", url: "https://www.passionfish.net/" },
            { name: "Nepenthe", city: "PCH", type: "View", desc: "Big Sur æ‡¸å´–ä¸Šçš„æ™¯è§€é¤å»³ï¼Œæ“æœ‰ç„¡æ•µæµ·æ™¯ï¼Œé©åˆäº«ç”¨æ¼¢å ¡èˆ‡è–¯æ¢ã€‚", icon: "ğŸŒ…", url: "https://www.nepenthe.com/" },
            
            // LA
            { name: "The Boiling Crab", city: "LA", type: "Seafood", desc: "æ‰‹æŠ“æµ·é®®çš„å§‹ç¥–ï¼Œè·¯æ˜“æ–¯å®‰é‚£è‚¯ç“Šé¢¨å‘³ï¼Œé‡å£å‘³æ„›å¥½è€…å¤©å ‚ã€‚", icon: "ğŸ¦", url: "https://theboilingcrab.com/" },
            { name: "Grand Central Market", city: "LA", type: "Market", desc: "æ´›æ‰ç£¯ç¾é£Ÿé›†æ•£åœ°ï¼ŒåŒ…å« Eggslutã€Tacos ç­‰å¤šæ¨£åŒ–å¹³åƒ¹é¸æ“‡ã€‚", icon: "ğŸŒ®", url: "https://www.grandcentralmarket.com/" },
            { name: "BCD Tofu House", city: "LA", type: "Korean", desc: "éŸ“åœ‹åŸçŸ¥åçš„ 24 å°æ™‚å«©è±†è…ç…²ï¼Œé™„è´ˆç„¡é™çºŒçš„å°èœèˆ‡çŸ³é‹é£¯ã€‚", icon: "ğŸ¥˜", url: "http://bcdtofu.com/" },
            { name: "Shake Shack", city: "LA", type: "FastFood", desc: "ç²¾ç·»æ¼¢å ¡ä»£è¡¨ï¼Œç‰›è‚‰å“è³ªæ¥µé«˜ï¼Œå¥¶æ˜”æ˜¯ä¸€çµ•ã€‚</br>æ¨è–¦èœè‰²ï¼š ShackBurgerã€Cheese Friesã€‚</br>æ¨è–¦é£²å“ï¼š Hand-Spun Shakes (ç¶“å…¸å¥¶æ˜”)ã€‚</br>æ´›æ‰ç£¯ï¼š 6201 Hollywood Blvd (é›¢å¥½èŠå¡¢çš„é£¯åº— The Hollywood Franklin æ¥µè¿‘)ã€‚</br>", icon: "ğŸ”", url: "https://shakeshack.com/" }
        ];

        let attractionMap = {};
        let attractions = [
            // --- èˆŠé‡‘å±± (SF) æ™¯é» ---
            { name: "é‡‘é–€å¤§æ©‹ Golden Gate", city: "SF", type: "Photo", desc: "èˆŠé‡‘å±±æœ€è‘—åçš„è±¡å¾µã€‚é€™åº§æ©˜ç´…è‰²çš„æ‡¸ç´¢æ©‹æ©«è·¨é‡‘é–€æµ·å³½ï¼Œç„¡è«–æ˜¯åœ¨éœ§ä¸­è‹¥éš±è‹¥ç¾é‚„æ˜¯æ™´å¤©ä¸‹çš„é®®è±”ï¼Œéƒ½æ˜¯æ—…äººçš„å¿…çœ‹ä¹‹è™•ã€‚", short_desc: "æ©˜ç´…è‰²æ‡¸ç´¢æ©‹ï¼ŒèˆŠé‡‘å±±æœ€è‘—åçš„è±¡å¾µã€‚", icon: "ğŸŒ‰", url: "https://www.goldengatebridge.org/" }, 
            { name: "æ¼äººç¢¼é ­èˆ‡ 39 è™Ÿç¢¼é ­", city: "SF", type: "Food", desc: "èˆŠé‡‘å±±äººæ°£æœ€æ—ºçš„è§€å…‰å€ï¼Œå……æ»¿å•†åº—ã€é¤å»³å’Œè¡—é ­è—äººã€‚æœ€è‘—åçš„è«éæ–¼æ£²æ¯åœ¨æµ®ç­’ä¸Šçš„é‡ç”Ÿæµ·ç…ã€‚å¿…åšé…¸éºµåŒ…è›¤èœŠæ¿ƒæ¹¯ã€‚", short_desc: "äººæ°£è§€å…‰å€ï¼Œå¿…çœ‹é‡ç”Ÿæµ·ç…èˆ‡äº«ç”¨é…¸éºµåŒ…æ¿ƒæ¹¯ã€‚", icon: "ğŸ¦€", url: "https://www.fishermanswharf.org/" },
            { name: "æƒ¡é­”å³¶ Alcatraz", city: "SF", type: "History", desc: "æ›¾æ˜¯é—œæŠ¼å…¨ç¾æœ€å±éšªç½ªçŠ¯ï¼ˆå¦‚å¡å½­ï¼‰çš„è¯é‚¦ç›£ç„ã€‚å³¶ä¸Šå……æ»¿ç¥ç¥•è‰²å½©ï¼Œæä¾›ä¸–ç•Œç´šçš„å°è¦½ç³»çµ±ã€‚éœ€ææ—©æ•¸æœˆè¨‚ç¥¨ã€‚", short_desc: "å‚³å¥‡è¯é‚¦ç›£ç„ï¼Œå……æ»¿ç¥ç¥•è‰²å½©èˆ‡æ­·å²æ•…äº‹ã€‚", icon: "ğŸï¸", url: "https://www.alcatrazcruises.com/" },
            { name: "ä¹æ›²èŠ±è¡— Lombard St", city: "SF", type: "Photo", desc: "ä¸–ç•Œä¸Šæœ€å½æ›²çš„è¡—é“ã€‚ç‚ºäº†ç·©è¡æ¥µåº¦é™¡å³­çš„å¡åº¦è€Œè¨­è¨ˆäº†å…«å€‹æ€¥è½‰å½ï¼Œè·¯æ—ç¨®æ»¿ç¹¡çƒèŠ±ï¼Œæ™¯ç·»è¿·äººã€‚", short_desc: "ä¸–ç•Œä¸Šæœ€å½æ›²çš„è¡—é“ï¼Œç¹¡çƒèŠ±èˆ‡æ€¥è½‰å½çš„è¦–è¦ºé¥—å®´ã€‚", icon: "ğŸŒ¸", url: "https://www.sftravel.com/article/guide-to-lombard-street" },
            { name: "å½©ç¹ªå¥³å£« Painted Ladies", city: "SF", type: "Photo", desc: "èˆŠé‡‘å±±æœ€å…·ä»£è¡¨æ€§çš„ç¶­å¤šåˆ©äºå¼æ’å±‹ï¼ŒèƒŒæ™¯æ­£æ˜¯ç¾ä»£åŒ–çš„å¸‚ä¸­å¿ƒé«˜æ¨“å¤§å»ˆï¼Œå‘ˆç¾å‡ºå¤å…¸èˆ‡ç¾ä»£çš„å®Œç¾å°æ¯”ã€‚", short_desc: "ç¶“å…¸ç¶­å¤šåˆ©äºå¼æ’å±‹ï¼Œé˜¿æ‹‰è«å»£å ´çš„çµ•ç¾æ˜ä¿¡ç‰‡æ™¯ç·»ã€‚", icon: "ğŸ ", url: "https://www.sftravel.com/article/guide-alamo-square-painted-ladies" },
            { name: "æ¸¡è¼ªå¤§å»ˆ Ferry Building", city: "SF", type: "Food", desc: "èˆŠé‡‘å±±çš„ç¾é£Ÿæ®¿å ‚ã€‚é€™åº§æ­·å²æ‚ ä¹…çš„æ¸¡è¼ªç«™å…§é€²é§äº†è¨±å¤šåœ¨åœ°æ‰‹å·¥è—å“ã€ç²¾å“å’–å•¡ã€ä¹³é…ªèˆ‡ç‰¹è‰²ç¾é£Ÿã€‚", short_desc: "æ­·å²æ‚ ä¹…çš„ç¾é£Ÿæ®¿å ‚ï¼ŒåŒ¯é›†åœ¨åœ°è¾²ç”¢èˆ‡ç²¾å“å’–å•¡ã€‚", icon: "â›´ï¸", url: "https://www.ferrybuildingmarketplace.com/" },
            { name: "å®å®è»Š Cable Car", city: "SF", type: "Fun", desc: "ä¸–ç•Œä¸Šå”¯ä¸€ä»åœ¨é‹è¡Œçš„æ‰‹å‹•çºœè»Šç³»çµ±ï¼Œä¹Ÿæ˜¯èˆŠé‡‘å±±çš„ç§»å‹•åç‰‡ã€‚æ­ä¹˜å®ƒç©¿æ¢­åœ¨é™¡å¡é–“ï¼Œæ¥µå…·å¾©å¤æƒ…æ‡·ã€‚", short_desc: "é«”é©—ä¸–ç•Œå”¯ä¸€æ‰‹å‹•çºœè»Šï¼Œç©¿æ¢­é™¡å¡çš„å¾©å¤æƒ…æ‡·ã€‚", icon: "ğŸš‹", url: "https://www.sfmta.com/getting-around/muni/cable-cars" },
            { name: "è—è¡“å®®", city: "SF", type: "Photo", desc: "å¤ç¾…é¦¬å»¢å¢Ÿé¢¨æ ¼å»ºç¯‰ï¼Œé©åˆå¤•é™½æ™‚åˆ†æ‹ç…§ã€‚", short_desc: "å¤ç¾…é¦¬å»¢å¢Ÿé¢¨æ ¼å»ºç¯‰ï¼Œé©åˆå¤•é™½æ™‚åˆ†æ‹ç…§ã€‚", icon: "ğŸ›ï¸", url: "https://palaceoffinearts.com/" },
            { name: "Chase Center", city: "SF", type: "Fun", desc: "é‡‘å·å‹‡å£«éšŠä¸»å ´ï¼Œç¾ä»£åŒ–ä¸”ç†±è¡€æ²¸é¨°ã€‚", short_desc: "é‡‘å·å‹‡å£«éšŠä¸»å ´ï¼Œç¾ä»£åŒ–ä¸”ç†±è¡€æ²¸é¨°ã€‚", icon: "ğŸ€", url: "https://www.chasecenter.com/" },
            
            // --- å„ªå‹ç¾åœ° (Yosemite) æ™¯é» ---
            { name: "éš§é“æ™¯è§€ Tunnel View", city: "Yosemite", type: "Photo", desc: "é€²å…¥å„ªå‹ç¾åœ°è°·åœ°æ™‚æœ€ç¶“å…¸çš„è§€æ™¯å°ã€‚å¾é€™è£¡å¯ä»¥ä¸€æ¬¡é£½è¦½é…‹é•·å²©ã€æ–°å¨˜é¢ç´—ç€‘å¸ƒå’ŒåŠåœ“é ‚ä¸‰å¤§åœ°æ¨™ï¼Œæ˜¯æ”å½±æ„›å¥½è€…çš„å¤©å ‚ã€‚", short_desc: "å„ªå‹ç¾åœ°è±¡å¾µæ€§è¦–è§’ï¼Œä¸€æ¬¡é£½è¦½ä¸‰å¤§åœ°æ¨™ã€‚", icon: "ğŸï¸", url: "https://www.nps.gov/yose/planyourvisit/tunnelview.htm" },
            { name: "é…‹é•·å²© El Capitan", city: "Yosemite", type: "Nature", desc: "ä¸–ç•Œä¸Šæœ€å¤§çš„å–®å¡ŠèŠ±å´—å²©å·¨çŸ³ï¼Œå‚ç›´é«˜åº¦è¶…é 900 å…¬å°ºã€‚é›–ç„¶éŠå®¢ä¸èƒ½æ”€ç™»ï¼Œä½†å¾è°·åº•ä»°æœ›å…¶æ°£å‹¢ï¼Œå·²è¶³å¤ ä»¤äººéœ‡æ’¼ã€‚", short_desc: "å…¨çƒæœ€å¤§å–®å¡ŠèŠ±å´—å²©ï¼Œæ”€å²©è€…çš„å¤¢æƒ³è–åœ°ã€‚", icon: "ğŸ§—", url: "https://www.nps.gov/yose/planyourvisit/elcapitan.htm" },
            { name: "å„ªå‹ç¾åœ°ç€‘å¸ƒ Yosemite Falls", city: "Yosemite", type: "Nature", desc: "ç”±ä¸Šã€ä¸­ã€ä¸‹ä¸‰æ®µç€‘å¸ƒçµ„æˆï¼Œç¸½è½å·®é” 739 å…¬å°ºï¼Œæ˜¯åŒ—ç¾æœ€é«˜çš„ç€‘å¸ƒä¹‹ä¸€ã€‚æ˜¥æœ«å¤åˆé›ªæ°´èåŒ–æ™‚ï¼Œæ°´é‡æœ€å¤§ï¼Œæ°£å‹¢æœ€ç‚ºç£…ç¤¡ã€‚", short_desc: "åŒ—ç¾æœ€é«˜ç€‘å¸ƒä¹‹ä¸€ï¼Œæ˜¥å­£æ°´é‡æœ€ç‚ºå£¯è§€ã€‚", icon: "ğŸŒŠ", url: "https://www.nps.gov/yose/planyourvisit/waterfalls.htm" },
            { name: "åŠåœ“é ‚ Half Dome", city: "Yosemite", type: "Nature", desc: "å„ªå‹ç¾åœ°æœ€è‘—åçš„åœ°æ¨™ï¼Œå½¢ç‹€åƒä¸€é¡†è¢«åˆ‡é–‹çš„å·¨å¤§åœ“é ‚ã€‚å®ƒä»£è¡¨è‘—å„ªå‹ç¾åœ°çš„ç²¾ç¥â€”â€”å …æ¯…èˆ‡å£¯éº—ã€‚å¾è°·åº•æˆ–å†°å·é»é çœºçš†æ¥µç‚ºå£¯è§€ã€‚", short_desc: "å„ªå‹ç¾åœ°ç²¾ç¥è±¡å¾µï¼Œç¨ç‰¹åŠåœ“å½¢èŠ±å´—å²©åœ°æ¨™ã€‚", icon: "â›°ï¸", url: "https://www.nps.gov/yose/planyourvisit/halfdome.htm" },

            // --- èˆŠé‡‘å±±åˆ°å¡æ¢…çˆ¾ PCH æ™¯é» ---
            { name: "é´¿å­é»ç‡ˆå¡”", city: "PCH", type: "History", desc: "å»ºæ–¼ 1871 å¹´ï¼Œæ˜¯ç¾åœ‹è¥¿æµ·å²¸æœ€é«˜çš„ç‡ˆå¡”ä¹‹ä¸€ã€‚æˆ¶å¤–åœ’å€å…¨å¤©é–‹æ”¾ï¼Œæ˜¯ç¶“å…¸çš„æµ·å²¸æ”å½±æ“šé»ã€‚", short_desc: "ç¶“å…¸æµ·å²¸ç‡ˆå¡”ï¼Œç¾åœ‹è¥¿æµ·å²¸æœ€é«˜ä¹‹ä¸€ã€‚", icon: "ğŸ’¡", url: "https://www.parks.ca.gov/?page_id=533" },
            { name: "é¯Šé­šé°­ç£", city: "PCH", type: "Nature", desc: "å› æµ·ä¸­å·¨çŸ³å½¢ç‹€é…·ä¼¼é¯Šé­šèƒŒé°­è€Œå¾—åã€‚æ“æœ‰åŸå§‹çš„è‡ªç„¶ç¾æ„Ÿèˆ‡ç¨ç‰¹çš„æµ·è•æ´æ™¯è§€ã€‚", short_desc: "å½¢ç‹€é…·ä¼¼é¯Šé­šèƒŒé°­çš„å·¨çŸ³æµ·ç˜ã€‚", icon: "ğŸ¦ˆ", url: "https://www.californiacoastline.org/cgi-bin/image.cgi?image=4583&mode=big&options=0" },
            { name: "è–å¡”å…‹é­¯èŒ²ç¢¼é ­èˆ‡æ¨‚åœ’", city: "PCH", type: "Fun", desc: "åŠ å·æœ€å¤è€çš„æµ·æ¿±éŠæ¨‚åœ’ï¼Œæ“æœ‰ç™¾å¹´æ­·å²çš„æœ¨è³ªéå±±è»Šã€‚ç¢¼é ­ä¸‹æ–¹å¸¸æœ‰æˆç¾¤æµ·ç…ä¼‘æ†©ã€‚", short_desc: "åŠ å·æœ€å¤è€æµ·æ¿±æ¨‚åœ’ï¼Œç¶“å…¸æœ¨è³ªéå±±è»Šã€‚", icon: "ğŸ¡", url: "https://beachboardwalk.com/" },
            { name: "è’™ç‰¹é›·ç£æ°´æ—é¤¨", city: "PCH", type: "Nature", desc: "å…¨ç¾æœ€å—æ¨å´‡çš„æ°´æ—é¤¨ï¼Œå¿…çœ‹å·¨å‹æµ·è—»æ£®æ—èˆ‡æµ·çºé¤µé£Ÿç§€ã€‚åº§è½æ–¼æ­·å²ç½é ­å» è¡—ã€‚", short_desc: "å…¨ç¾é ‚å°–æ°´æ—é¤¨ï¼Œå·¨å‹æµ·è—»æ£®æ—æ™¯è§€ã€‚", icon: "ğŸ ", url: "https://www.montereybayaquarium.org/" },
            { name: "17-Mile Drive", city: "PCH", type: "Nature", desc: "ç§äººæ™¯è§€å…¬è·¯ï¼Œæ¬£è³ç¢§æµ·è—å¤©ã€å­¤æŸæ¨¹ã€æµ·è±¹èˆ‡è±ªè¯ä½å®…ã€‚éœ€ä»˜å…¥åœ’è²»$12.25/è»Šã€‚", short_desc: "æµ·å²¸ç·šç§äººæ™¯è§€å…¬è·¯ï¼Œå¿…çœ‹å­¤æŸèˆ‡é³¥å²©ã€‚", icon: "ğŸŒ²", url: "https://www.pebblebeach.com/17-mile-drive/" },
            { name: "å¡æ¢…çˆ¾å°é®", city: "PCH", type: "Culture", desc: "å……æ»¿æ­å¼ç«¥è©±æ°›åœçš„è—è¡“å°é®ï¼Œæ“æœ‰è–‘é¤…å±‹èˆ¬çš„æˆ¿èˆå’Œæ½”ç™½æ²™ç˜ï¼Œé©åˆæ•£æ­¥èˆ‡è—å»Šä¹‹æ—…ã€‚", short_desc: "æ­å¼ç«¥è©±è—è¡“å°é®ï¼Œç„¡éœ“è™¹ç‡ˆèˆ‡é€Ÿé£Ÿåº—ã€‚", icon: "ğŸ¡", url: "https://www.carmelcalifornia.com/" },

            // --- PCH æ™¯é» ---
            { name: "ç¾…ä¼¯æ–¯è§’å·ç«‹è‡ªç„¶ä¿è­·å€ Point Lobos", city: "PCH", type: "Nature", desc: "è¢«è­½ç‚ºã€ŒåŠ å·å·ç«‹å…¬åœ’ç³»çµ±ä¸­çš„çš‡å† ã€ã€‚é€™è£¡æœ‰è±å¯Œçš„æµ·é³¥ã€æµ·è±¹èˆ‡æµ·çºç”Ÿæ…‹ï¼Œä»¥åŠå£¯è§€çš„æµ·è•æ™¯è§€ã€‚", short_desc: "åŠ å·çš‡å† ç´šè‡ªç„¶ä¿è­·å€ï¼Œè§€è³æµ·çºæµ·è±¹ã€‚", icon: "ğŸ¦­", url: "https://www.parks.ca.gov/?page_id=571" },
            { name: "Bixby Bridge", city: "PCH", type: "Photo", desc: "ä¸€è™Ÿå…¬è·¯æœ€å…·ä»£è¡¨æ€§çš„æ”å½±é»ã€‚å·¨å¤§çš„å–®è·¨æ··å‡åœŸæ‹±æ©‹å®Œå·¥æ–¼ 1932 å¹´ï¼Œæ©«è·¨åœ¨é™¡å³­çš„æ–·å´–æ·±è°·ä¹‹é–“ã€‚", short_desc: "ä¸€è™Ÿå…¬è·¯æœ€è‘—åçš„å–®æ‹±æ©‹ï¼Œæ‡¸å´–çµ•æ™¯ã€‚", icon: "ğŸŒ‰", url: "https://www.fs.usda.gov/recarea/lpnf/recarea/?recid=10924" },
            { name: "è²ä½›æµ·ç˜ Pfeiffer Beach", city: "PCH", type: "Photo", desc: "éš±è—åœ¨å±±è°·ä¸­çš„ç§˜å¢ƒæµ·ç˜ã€‚è‘—åçš„ã€Œç´«è‰²ã€æ²™ç˜èˆ‡æµ·ä¸Šå·¨å¤§çš„ Keyhole Rock çŸ³æ´æ‹±é–€ã€‚", short_desc: "æ¬£è³ Keyhole Rock èˆ‡ç¨ç‰¹çš„ç´«è‰²æ²™ç˜ã€‚", icon: "ğŸ’œ", url: "https://www.fs.usda.gov/recarea/lpnf/recarea/?recid=10921" },
            { name: "éº¥å…‹å¨ç€‘å¸ƒ McWay Falls", city: "PCH", type: "Nature", desc: "åŠ å·æ¥µå°‘æ•¸ç›´æ¥è½å…¥æµ·ç˜çš„ç€‘å¸ƒã€‚ç¢§ç¶ çš„æµ·æ°´é…ä¸Šç´°ç™½çš„ç€‘å¸ƒï¼Œç¾å¾—åƒä¸€å¹…ç•«ã€‚", short_desc: "ä¸–å¤–æ¡ƒæºèˆ¬çš„æµ·å²¸ç€‘å¸ƒï¼Œå¯¶çŸ³è‰²æµ·ç£ã€‚", icon: "ğŸ’§", url: "https://www.parks.ca.gov/?page_id=570" },
            { name: "èµ«æ°å¤å ¡ Hearst Castle", city: "PCH", type: "History", desc: "å ±æ¥­å¤§äº¨èµ«æ–¯ç‰¹çš„ç§äººé ˜åœ°ï¼Œèåˆåœ°ä¸­æµ·é¢¨æƒ…èˆ‡ç„¡æ•¸æ­æ´²éª¨è‘£ï¼Œæ¥µç›¡å¥¢è¯ã€‚", short_desc: "æ¥µè‡´å¥¢è¯çš„ç§äººèŠåœ’ï¼Œèåˆæ­æ´²è—è¡“ã€‚", icon: "ğŸ°", url: "https://hearstcastle.org/" },
            { name: "è±¡é¼»æµ·è±¹ç˜ Elephant Seal Rookery", city: "PCH", type: "Nature", desc: "å…¨å¹´éƒ½å¯ä»¥åœ¨æ­¤è§€è³åˆ°æˆç™¾ä¸Šåƒéš»å·¨å¤§çš„è±¡é¼»æµ·è±¹åœ¨æ²™ç˜ä¸Šä¼‘æ¯ã€æ›æ¯›æˆ–è‚²é››ã€‚", short_desc: "å…è²»ç”Ÿæ…‹è§€å¯Ÿé»ï¼Œè§€è³æˆç¾¤è±¡é¼»æµ·è±¹ã€‚", icon: "ğŸ¦­", url: "https://www.elephantseal.org/" },
            { name: "æœˆå…‰çŸ³æµ·ç˜ Moonstone Beach", city: "PCH", type: "Nature", desc: "ä»¥æµ·ç˜ä¸Šæ•£å¸ƒçš„å°ç‰çŸ³å¾—åã€‚æ“æœ‰é¢¨æ™¯æ¥µä½³çš„æ¿±æµ·æœ¨æ£§é“ï¼Œé©åˆæ‚ é–’æ•£æ­¥ã€‚", short_desc: "ä»¥å°ç‰çŸ³èåï¼Œæ“æœ‰çµ•ç¾æ¿±æµ·æœ¨æ£§é“ã€‚", icon: "ğŸ’", url: "https://visitcambriaca.com/moonstone-beach/" },
            { name: "è«ç¾…è²èˆ‡è«ç¾…å²© Morro Rock", city: "PCH", type: "Photo", desc: "å·¨å¤§çš„æµ·ä¸Šå²©æ¼¿å²©çŸ—ç«‹åœ¨æµ·æ¸¯å…¥å£ã€‚ç¢¼é ­å€å……æ»¿äº†æµ·é®®é¤å»³èˆ‡æ°´ä¸Šæ´»å‹•ã€‚", short_desc: "å·¨å‹æµ·ä¸Šå²©æ¼¿å²©åœ°æ¨™ï¼Œæµ·é®®ç¾é£Ÿç¢¼é ­ã€‚", icon: "ğŸŒ‹", url: "https://www.morrobay.org/" },
            { name: "çš®æ–¯è«æ¯”å¥‡ Pismo Beach", city: "PCH", type: "Fun", desc: "é€™æ®µæ—…ç¨‹çš„çµ‚é»ï¼Œæ˜¯ä¸€å€‹å……æ»¿é™½å…‰æ°£æ¯çš„æµ·é‚Šæ¸¡å‡å°é®ã€‚ä»¥å»£å¤§çš„æ²™ç˜å’Œæ²™ä¸˜æ´»å‹•èåã€‚", short_desc: "æµ·é‚Šæ¸¡å‡å°é®ï¼Œæ²™ç˜ç¢¼é ­èˆ‡æ²™ä¸˜æ´»å‹•ã€‚", icon: "ğŸ–ï¸", url: "https://experiencepismobeach.com/" },

            // --- PCH çµ‚æ®µæ™¯é» ---
            { name: "ä¸¹éº¥æ‘ Solvang", city: "PCH", type: "Culture", desc: "ç”±ä¸¹éº¥ç§»æ°‘å»ºç«‹ï¼Œå®Œç¾ä¿ç•™äº†ä¸¹éº¥å»ºç¯‰é¢¨æ ¼èˆ‡æ–‡åŒ–ã€‚éš¨è™•å¯è¦‹å·¨å¤§çš„é¢¨è»Šã€å‚³çµ±æœ¨é€ æˆ¿å±‹ä»¥åŠå‚³çµ±æœé£¾çš„æœ¨å¶è£é£¾ã€‚", short_desc: "å……æ»¿åŒ—æ­ç«¥è©±æ°£æ¯çš„ä¸¹éº¥ç§»æ°‘å°é®ï¼Œç¶“å…¸é¢¨è»Šåœ°æ¨™ã€‚", icon: "ğŸ‡©ğŸ‡°", url: "https://solvangusa.com/" },
            { name: "è–å¡”èŠ­èŠ­æ‹‰ Santa Barbara", city: "PCH", type: "Culture", desc: "è¢«è­½ç‚ºã€Œç¾è¥¿çš„è”šè—æµ·å²¸ã€ï¼ŒåŸå¸‚è¦å®šæ‰€æœ‰å»ºç¯‰å¿…é ˆç¶­æŒç´…ç“¦ã€ç™½ç‰†çš„è¥¿ç­ç‰™æ®–æ°‘é¢¨æ ¼ï¼Œæ•£ç™¼è‘—å„ªé›…çš„åº¦å‡æ°›åœã€‚", short_desc: "å…·å‚™ç´…ç“¦ç™½ç‰†è¥¿ç­ç‰™é¢¨æ ¼çš„å„ªé›…æµ·å²¸åŸå¸‚ï¼Œå¿…ç™»æ³•é™¢é˜æ¨“ã€‚", icon: "ğŸ‡ªğŸ‡¸", url: "https://santabarbaraca.com/" },

            // --- æ´›æ‰ç£¯ (LA) æ™¯é» ---
            { name: "è–å¡”è«å°¼å¡ç¢¼é ­ Santa Monica Pier", city: "LA", type: "Fun", desc: "é€™ä¸åƒ…æ˜¯ä¸€è™Ÿå…¬è·¯æ¥è¿‘å°¾è²çš„ç¶“å…¸ç«™é»ï¼Œä¹Ÿæ˜¯å‚³å¥‡ã€Œæ¯è¦ªä¹‹è·¯ã€66 è™Ÿå…¬è·¯çš„çµ‚é»ç«™ã€‚ç¢¼é ­å……æ»¿äº†å¾©å¤çš„æµ·æ¿±éŠæ¨‚è¨­æ–½èˆ‡ç†±é¬§æ°›åœã€‚", short_desc: "66è™Ÿå…¬è·¯çµ‚é»ï¼Œç¶“å…¸æµ·æ¿±æ¨‚åœ’èˆ‡æ‘©å¤©è¼ªã€‚", icon: "ğŸ ", url: "https://www.santamonicapier.org/" },
            { name: "è¿ªå£«å°¼æ¨‚åœ’", city: "LA", type: "Fun", desc: "å…ƒç¥–æ¨‚åœ’ï¼Œå……æ»¿ç«¥è©±èˆ‡é­”æ³•ã€‚å»ºè­°ä½¿ç”¨ Genie+ã€‚", short_desc: "å…ƒç¥–æ¨‚åœ’ï¼Œå……æ»¿ç«¥è©±èˆ‡é­”æ³•ã€‚", icon: "ğŸ¢", url: "https://disneyland.disney.go.com/" },
            { name: "å¥½èŠå¡¢ç’°çƒå½±åŸ Universal Studios", city: "LA", type: "Fun", desc: "å…¨çƒé¦–åº§ç’°çƒå½±åŸï¼ŒçµåˆçœŸå¯¦ç‰‡å ´èˆ‡éŠæ¨‚è¨­æ–½ã€‚å¿…ç©ï¼šè¶…ç´šä»»å¤©å ‚ä¸–ç•Œï¼ˆé¦¬åŠ›æ­è³½è»Šï¼‰ã€Studio Tourï¼ˆç©å‘½é—œé ­/å¤§ç™½é¯Šï¼‰ã€å“ˆåˆ©æ³¢ç‰¹ç¦å¿Œä¹‹æ—…ã€‚å»ºè­°è³¼è²· Express Pass çœæ™‚ã€‚", short_desc: "é›»å½±ä¸»é¡Œæ¨‚åœ’ï¼Œå¿…ç©ä»»å¤©å ‚ä¸–ç•Œèˆ‡ç‰‡å ´å°è¦½ã€‚", icon: "ğŸ¬", url: "https://www.universalstudioshollywood.com/" },
            { name: "è¯ç´å…„å¼Ÿå½±åŸ Warner Bros. Tour", city: "LA", type: "Culture", desc: "ç›¸è¼ƒæ–¼ç’°çƒå½±åŸï¼Œæä¾›æ›´å…·çŸ¥æ€§æ·±åº¦çš„ç‰‡å ´åƒè§€ã€‚èµ°å…¥ã€Šå…­äººè¡Œã€‹å’–å•¡é¤¨ã€ã€Šè™è ä¿ ã€‹é“å…·é–“èˆ‡çœŸå¯¦è£½ç‰‡å» ã€‚éœ€æå‰é ç´„ã€‚", short_desc: "æ·±åº¦ç‰‡å ´åƒè§€ï¼Œèµ°å…¥å…­äººè¡Œèˆ‡è™è ä¿ å ´æ™¯ã€‚", icon: "ğŸ¥", url: "https://www.wbstudiotour.com/" },
            { name: "æ ¼é‡Œæ–æ–¯å¤©æ–‡å° Griffith Observatory", city: "LA", type: "Photo", desc: "æ´›æ‰ç£¯åœ°æ¨™ï¼Œã€Šæ¨‚ä¾†è¶Šæ„›ä½ ã€‹(La La Land) å–æ™¯åœ°ã€‚æˆ¶å¤–éœ²å°å¯çœºæœ›å¥½èŠå¡¢æ¨™èªŒèˆ‡çµ•ç¾å¸‚æ™¯å¤•é™½ã€‚Samuel Oschin å¤©è±¡é¤¨ç§€éœ€ç¾å ´è³¼ç¥¨ã€‚", short_desc: "ä¿¯ç° LA å¤œæ™¯èˆ‡å¥½èŠå¡¢æ¨™èªŒçš„æœ€ä½³åœ°é»ã€‚", icon: "ğŸ”­", url: "https://griffithobservatory.org/" },
            { name: "å¥½èŠå¡¢æ˜Ÿå…‰å¤§é“ Walk of Fame", city: "LA", type: "History", desc: "å°‹æ‰¾é‘²åµŒåœ¨äººè¡Œé“ä¸Šçš„ç²‰ç´…æ˜Ÿå½¢çç« ï¼Œåƒè§€ TCL ä¸­åœ‹åŠ‡é™¢ï¼ˆæ˜æ˜Ÿæ‰‹è…³å°ï¼‰èˆ‡æœæ¯”åŠ‡é™¢ã€‚å»ºè­°ä¸Šåˆå‰å¾€é¿é–‹äººæ½®ã€‚", short_desc: "å°‹æ‰¾å¿ƒå„€æ˜æ˜Ÿçš„æ˜Ÿæ˜Ÿèˆ‡æ‰‹å°ã€‚", icon: "â­", url: "https://www.walkoffame.com/" },
        ];
        
        let itineraryData = {
            phase1: {
                title: "Phase 1: ä¸‰è—©å¸‚æ¼«éŠèˆ‡NBA",
                icon: "ğŸŒ‰",
                badgeClass: "bg-[#cfdde6] text-[#475569]",
                dateRange: "2/26 - 3/2",
                desc: "é‡‘é–€å¤§æ©‹ã€æƒ¡é­”å³¶ã€NBA è³½äº‹",
                days: [
                    { date: "2/26 (å››)", loc: "èˆŠé‡‘å±±", act: "æŠµé”èˆ‡æ™‚å·®èª¿é©", detail: "21:15 SFO æŠµé”ã€å‰å¾€ Riu Plaza Fisherman's Wharfã€ä¼‘æ¯èª¿é©æ™‚å·®ã€‚", transport: "Shared Shuttle æˆ– Uber/Lyft (è²»ç”¨è¼ƒé«˜ä½†æœ€æ–¹ä¾¿)ã€‚", hotel: "Riu Plaza Fisherman's Wharf" },
                    { date: "2/27 (äº”)", loc: "èˆŠé‡‘å±±", act: "æƒ¡é­”å³¶èˆ‡åŸå¸‚ç²¾è¯", detail: "ä¸Šåˆï¼šæƒ¡é­”å³¶åƒè§€ã€‚<br>åˆé¤ï¼šæ¼äººç¢¼é ­<br>ä¸‹åˆï¼šLombard Street (çºœè»Šé«”é©—)ã€å‰å¾€è—è¡“å®®ã€‚<br>æ™šé¤<br>æ™šä¸Šï¼šè—è¡“å®®æ¹–ç•”æ¬£è³å¤•é™½ã€è¿”å›é£¯åº—ã€‚", transport: "æƒ¡é­”å³¶ï¼šç¢¼é ­æ­¥è¡Œã€‚ä¹æ›²èŠ±è¡—/è—è¡“å®®ï¼š Powell-Hyde çºœè»Š ğŸš‹ã€‚", attractionKey: "æƒ¡é­”å³¶ Alcatraz", hotel: "Riu Plaza Fisherman's Wharf" }, 
                    { date: "2/28 (å…­)", loc: "èˆŠé‡‘å±±", act: "NBA è³½äº‹æ—¥", detail: "ä¸Šåˆï¼šæ‚ é–’æ—©åˆé¤ã€Ferry Building æ•£æ­¥ã€‚<br>ä¸‹åˆï¼šå‰å¾€ Chase Center å‘¨é‚Šç”¨æ™šé¤ã€‚<br>åˆæ™šé¤<br>æ™šä¸Šï¼š17:30 è§€è³ NBA å‹‡å£«éšŠ vs æ¹–äººéšŠã€‚", transport: "Ferry Buildingï¼š MUNI å·´å£«ã€‚Chase Centerï¼š MUNI T-Line è¼•è»Œç›´é”ã€‚è³½å¾Œï¼š MUNI æˆ– Uber/Lyft å›é£¯åº—ã€‚", attractionKey: "Chase Center", hotel: "Riu Plaza Fisherman's Wharf" },
                    { date: "3/1 (æ—¥)", loc: "èˆŠé‡‘å±±/å‘¨é‚Š", act: "å…§é™¸è‡ªç„¶æ¢ç´¢ (å„ªå‹ç¾åœ°)", detail: "<strong>06:30 â€“ 07:30</strong> èˆŠé‡‘å±±å¸‚å€ä¸Šè»Š (è¦–åœ°é»è€Œå®šï¼Œè«‹æº–æ™‚)<br><strong>07:30 â€“ 11:30</strong> ä¹˜è»Šå‰å¾€å„ªå‹ç¾åœ° (ä¸­é€”ä¼‘æ¯ 20-30 åˆ†)<br><strong>11:30 â€“ 12:00</strong> æŠµé”åœ‹å®¶å…¬åœ’ (ç¶“å—å´æˆ–è¥¿å´å…¥å£)<br><strong>12:00 â€“ 16:30</strong> å„ªå‹ç¾åœ°è°·æ·±åº¦æ¢ç´¢ (è‡ªç”±åˆé¤)<br><strong>16:30 â€“ 17:00</strong> è§€è³ Tunnel View (é‡é»è§€æ™¯å°)<br><strong>17:00 â€“ 21:30</strong> è¿”å›èˆŠé‡‘å±± (ä¸­é€”ä¼‘æ¯ï¼Œæ™šé¤æ™‚æ®µæŠµé”)", transport: "æ—…è¡Œç¤¾æä¾›äº¤é€šè»Šã€‚", attractionKey: "é…‹é•·å²© El Capitan", hotel: "Riu Plaza Fisherman's Wharf" },
                    { date: "3/2 (ä¸€)", loc: "èˆŠé‡‘å±±", act: "åŸå¸‚æ–‡åŒ–å·¡ç¦®", detail: "ä¸Šåˆï¼šè¯åˆå»£å ´é€›è¡—ã€å‰å¾€å”äººè¡—åˆé¤ã€‚<br>ä¸‹åˆï¼šæ­è»Šå‰å¾€é‡‘é–€å¤§æ©‹åŒ—é‚Š Vista Point æ‹ç…§ã€‚<br>æ™šä¸Šï¼šé †è·¯å›ç¨‹ç¶“ Crissy Fieldã€æ™šé¤ã€è‡ªç”±æ´»å‹•ã€‚", transport: "çºœè»Š/å”äººè¡—ï¼š Powell-Mason çºœè»Š ğŸš‹ã€‚é‡‘é–€å¤§æ©‹ï¼š å¾å”äººè¡—æ­ Uber/Lyft ç›´é”ã€‚", attractionKey: "é‡‘é–€å¤§æ©‹ Golden Gate", hotel: "Riu Plaza Fisherman's Wharf" }
                ]
            },
            phase2: {
                title: "Phase 2: åŠ å·ä¸€è™Ÿå…¬è·¯",
                icon: "ğŸŒŠ",
                badgeClass: "bg-[#fef3c7] text-[#92400e]",
                dateRange: "3/3 - 3/5",
                desc: "çµ•ç¾æµ·å²¸è‡ªé§•ã€èµ«æ°å¤å ¡",
                days: [
                    { date: "3/3 (äºŒ)", loc: "PCH Day 1 (SFâœCarmel)", act: "ä¸€è™Ÿå…¬è·¯ç¶“å…¸æµ·å²¸ç·š (200km)", detail: "ä¸Šåˆï¼šé£¯åº—é€€æˆ¿ã€å¸‚å€å–è»Šã€‚å•Ÿç¨‹æ²¿è‘— 1 è™Ÿå…¬è·¯å—ä¸‹ã€‚<br>ğŸ›’Trader Joe's - Nob Hill (é è¿‘æ¼äººç¢¼é ­/å¸‚ä¸­å¿ƒ)<br>åœ°å€ï¼š 1095 Hyde St, San Francisco, CA 94109ï¼›ç‡Ÿæ¥­æ™‚é–“ï¼š08:00 â€“ 21:00 <br>ğŸ›’Target-Capitola (é è¿‘ Santa Cruz)ï¼›ç‰¹è‰²ï¼š ä½æ–¼ä¸€è™Ÿå…¬è·¯æ—çš„å¤§å‹è³¼ç‰©å•†å ´å€ï¼Œåœè»Šä½è¶…å¤šã€‚<br>åœ°å€ï¼š1750 41st Ave, Capitola, CA 95010ï¼›ç‡Ÿæ¥­æ™‚é–“ï¼š 08:00 â€“ 22:00<br>**è‡ªé§•è·¯æ³é‡é»ï¼šå‡ºç™¼å‰å‹™å¿…ç¢ºèª Caltrans è·¯æ³ä»¥é˜²åæ–¹ã€‚<br>è·¯ç·šï¼šèˆŠé‡‘å±± â†’ åŠæœˆç£ â†’ è–å¡”å…‹é­¯èŒ² â†’ è’™ç‰¹ç‘ â†’ 17-Mile Drive â†’ å¡æ¢…çˆ¾å°é® (ç´„200KM)ã€‚<br>æ™šä¸Šï¼šå…¥ä½éš†æ©æ©¡æœ¨é…’åº—ã€‚", transport: "ğŸš— ç§Ÿè»Š/è‡ªé§• (å‹™å¿…åœ¨å¸‚å€å–è»Š)ã€‚", attractionKey: "å¡æ¢…çˆ¾å°é®", hotel: "éš†æ©æ©¡æœ¨é…’åº— (Lone Oak Inn)" },
                    { date: "3/4 (ä¸‰)", loc: "PCH Day 2 (CarmelâœMorro Bay)", act: "Big Sur å·¨å²©æµ·å²¸å¥‡æ™¯èˆ‡å¤å ¡", detail: "ä¸Šåˆï¼šğŸ“Œç¬¬ä¸€ç«™ï¼šç¾…ä¼¯æ–¯è§’å·ç«‹è‡ªç„¶ä¿è­·å€** å¥è¡Œè³æµ·çºã€‚**ç¬¬äºŒç«™ï¼šæ¯”å…‹æ–¯æ¯”å¤§æ©‹** æ‹ç…§ã€‚é€”ç¶“ï¼š**è²ä½›æµ·ç˜** (ç´«è‰²æ²™ç˜ï¼Œå¯é¸æ“‡åœç•™)ã€‚**ç¬¬ä¸‰ç«™ï¼šéº¥å…‹å¨ç€‘å¸ƒ** è§€æ™¯å°ã€‚<br>ä¸‹åˆï¼š**ç¬¬å››ç«™ï¼šèµ«æ°å¤å ¡** (éœ€é ç´„å°è¦½) åƒè§€ã€‚**ç¬¬äº”ç«™ï¼šè±¡é¼»æµ·è±¹ç˜** è§€è³æµ·è±¹ç¾¤ã€‚<br>æ™šä¸Šï¼šæŠµé”ä¸¦å…¥ä½ Morro Bay é£¯åº—ã€‚", transport: "ğŸš— è‡ªé§• (å‹™å¿…ç¢ºèª Hwy 1 è·¯æ³ Caltrans)ã€‚", attractionKey: "èµ«æ°å¤å ¡ Hearst Castle", hotel: "æµ·æ¸¯å±‹é…’åº— (Harbor House Inn)" }, 
                    { date: "3/5 (å››)", loc: "PCH Day 3 (Morro BayâœLA)", act: "ç«¥è©±å°é®ã€è¥¿ç­ç‰™æµ·å²¸èˆ‡ 66 è™Ÿå…¬è·¯çµ‚é»", detail: "ä¸Šåˆï¼šé£¯åº—é€€æˆ¿ã€‚åœ¨ Pismo Beach é™„è¿‘äº«ç”¨æ—©é¤ã€‚**ç¬¬ä¸€ç«™ (å…§é™¸)ï¼šä¸¹éº¥æ‘ Solvang** (1.5 å°æ™‚) åƒè§€é¢¨è»Šã€å“åšä¸¹éº¥ç”œé»ã€‚**ç¬¬äºŒç«™ (æµ·å²¸)ï¼šè–å¡”èŠ­èŠ­æ‹‰** (2 å°æ™‚) ç™»é ‚æ³•é™¢é˜æ¨“ï¼Œä¸¦åœ¨ç¢¼é ­é™„è¿‘åˆé¤ã€‚<br>ä¸‹åˆï¼šæ²¿æµ·å²¸ç·šå—ä¸‹ã€‚<br>æ™šä¸Šï¼šæŠµé”æ´›æ‰ç£¯ï¼Œå‰å¾€ **è–å¡”è«å°¼å¡ç¢¼é ­** (Route 66 çµ‚é») è³å¤•é™½èˆ‡æ™šé¤ï¼Œå…¥ä½é£¯åº—ã€‚", transport: "ğŸš— è‡ªé§• (é€²å…¥æ´›æ‰ç£¯å‰äº¤é€šæœƒæ˜é¡¯è®Šæ…¢ï¼Œè«‹é ç•™ç·©è¡æ™‚é–“)ã€‚", attractionKey: "è–å¡”è«å°¼å¡ç¢¼é ­ Santa Monica Pier", hotel: "The Hollywood Franklin Hotel near Universal Studios" }
                ]
            },
            phase3: {
                title: "Phase 3: å¤©ä½¿ä¹‹åŸèˆ‡é›™æ¨‚åœ’",
                icon: "ğŸ¡",
                badgeClass: "bg-[#f3e8ff] text-[#6b21a8]",
                dateRange: "3/6 - 3/9",
                desc: "è¿ªå£«å°¼ã€ç’°çƒå½±åŸã€æ˜Ÿå…‰å¤§é“",
                days: [
                    { date: "3/6 (äº”)", loc: "æ´›æ‰ç£¯", act: "é­”æ³•ç«¥è©±åœ‹åº¦ (è¿ªå£«å°¼)", detail: "ä¸Šåˆï¼šé§•è»Šå‰å¾€ Anaheimã€è¿ªå£«å°¼æ¨‚åœ’ (Disneyland Park)ã€‚<br>ä¸‹åˆï¼šè¿ªå£«å°¼æ¨‚åœ’ (California Adventure) éŠç©ã€‚<br>æ™šä¸Šï¼šé§•è»Šè‡³ The Hollywood Franklin Hotel ä½å®¿ã€‚", transport: "ğŸš— è‡ªé§•ï¼š Santa Monica âœ Anaheim âœ Hollywoodã€‚", attractionKey: "è¿ªå£«å°¼æ¨‚åœ’", hotel: "The Hollywood Franklin Hotel" },
                    { date: "3/7 (å…­)", loc: "æ´›æ‰ç£¯", act: "å¥½èŠå¡¢æ™‚å°šæ¢ç´¢ (é‚„è»Š)", detail: "ä¸Šåˆï¼šé§•è»Šå‰å¾€ **æ ¼é‡Œæ–æ–¯å¤©æ–‡å° Griffith Observatory** (è§€æ™¯/æ‹ç…§)ã€‚<br>ä¸‹åˆï¼š**å¥½èŠå¡¢æ˜Ÿå…‰å¤§é“** å°‹æ‰¾æ˜Ÿæ˜Ÿã€The Grove è³¼ç‰©ã€‚<br>æ™šä¸Šï¼šUber/Lyft å›é£¯åº—ã€‚", transport: "ğŸš— è‡ªé§• (éœ€æ”¯ä»˜ Griffith åœè»Šè²»æˆ–æ­æ¥é§è»Š) -> å‚æ™šé‚„è»Šã€‚é‚„è»Šå¾Œï¼š äº¤é€šæ”¹ç‚º Uber/Lyftã€‚", attractionKey: "æ ¼é‡Œæ–æ–¯å¤©æ–‡å° Griffith Observatory", hotel: "The Hollywood Franklin Hotel" },
                    { date: "3/8 (æ—¥)", loc: "æ´›æ‰ç£¯", act: "é›»å½±ç‰¹æ•ˆéœ‡æ’¼ (ç’°çƒå½±åŸ)", detail: "ä¸Šåˆï¼šå‰å¾€ **å¥½èŠå¡¢ç’°çƒå½±åŸ** å…¥åœ’ã€‚<br>ä¸‹åˆï¼šæŒçºŒéŠç©åœ’å€è¨­æ–½ã€‚<br>æ™šä¸Šï¼šCityWalk ç”¨é¤è³¼ç‰©ã€Uber/Lyft å›é£¯åº—ã€‚", transport: "ğŸš• Uber/Lyft (æœ€æ–¹ä¾¿çœæ™‚)ã€‚", attractionKey: "å¥½èŠå¡¢ç’°çƒå½±åŸ Universal Studios", hotel: "The Hollywood Franklin Hotel" },
                    { date: "3/9 (ä¸€)", loc: "æ´›æ‰ç£¯", act: "è¼•é¬†å‘Šåˆ¥èˆ‡å›ç¨‹", detail: "ä¸Šåˆï¼šé£¯åº—é€€æˆ¿ã€Santa Monica æµ·é‚Šè‡ªç”±æ´»å‹•æˆ–è³¼ç‰©ã€‚<br>ä¸‹åˆï¼šSanta Monica åˆé¤ã€æº–å‚™å‰å¾€ LAX æ©Ÿå ´ã€‚<br>æ™šä¸Šï¼šæŠµé” LAXã€è¾¦ç†ç™»æ©Ÿæ‰‹çºŒã€22:15 âœˆï¸ èµ·é£›ã€‚", transport: "é£¯åº— âœ Santa Monica âœ LAXï¼š Uber/Lyft (å‹™å¿…é ç•™ 1.5-2 å°æ™‚è»Šç¨‹)ã€‚" }
                ]
            }
        };

        // --- Core Functions ---

        function createAttractionMap() {
            attractionMap = attractions.reduce((map, item) => {
                map[item.name] = item;
                return map;
            }, {});
        }
        function weatherIcon(code) {
          if (code === 0) return "â˜€ï¸";
          if ([1, 2].includes(code)) return "ğŸŒ¤ï¸";
          if (code === 3) return "â˜ï¸";
          if ([45, 48].includes(code)) return "ğŸŒ«ï¸";
          if ([51, 53, 55, 61, 63, 65].includes(code)) return "ğŸŒ§ï¸";
          if ([71, 73, 75].includes(code)) return "â„ï¸";
          return "ğŸŒ¡ï¸";
        }
        function wearAdvice(maxTemp) {
          if (maxTemp >= 28) return "ğŸ‘• ç‚ç†±ï¼ŒçŸ­è¢–ç‚ºä¸»ï¼Œæ³¨æ„é˜²æ›¬";
          if (maxTemp >= 22) return "ğŸ§¥ èˆ’é©ï¼Œè–„é•·è¢–æˆ–è¥¯è¡«";
          if (maxTemp >= 16) return "ğŸ§¶ å¾®æ¶¼ï¼Œå»ºè­°è–„å¤–å¥—";
          return "ğŸ§£ åå†·ï¼Œå¤–å¥—æˆ–ä¿æš–å±¤";
        }
        
        async function fetch3DayWeather(lat, lon, containerId, wearId) {
            try {
                const url = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&daily=weathercode,temperature_2m_max,temperature_2m_min&forecast_days=3&timezone=auto&units=metric`;
                const res = await fetch(url);
                if (!res.ok) throw new Error(`API Error`);
                const data = await res.json();
                const container = document.getElementById(containerId);
                container.innerHTML = "";

                data.daily.time.forEach((date, i) => {
                    // Update to use .weather-card class
                    const card = document.createElement("div");
                    card.className = "weather-card";
                    const maxTemp = Math.round(data.daily.temperature_2m_max[i]);
                    card.innerHTML = `
                        <div class="weather-icon">${weatherIcon(data.daily.weathercode[i])}</div>
                        <div class="weather-date">${new Date(date).toLocaleDateString().slice(5)}</div>
                        <div class="weather-temp">${maxTemp}Â°</div>
                    `;
                    container.appendChild(card);
                });
                document.getElementById(wearId).innerText = wearAdvice(Math.round(data.daily.temperature_2m_max[0]));
            } catch (error) {
                console.error("Error fetching weather data:", error);
                document.getElementById(containerId).innerHTML = `<p class="text-xs text-[#a09a93]">æ•¸æ“šè¼‰å…¥å¤±æ•—</p>`;
            }
        }
        
        function loadCurrentLocationWeather() {
          const cityEl = document.getElementById("current-city");
          if (!navigator.geolocation) {
            cityEl.innerHTML = `<span class="text-[#a09a93]">ä¸æ”¯æ´å®šä½</span>`;
            return;
          }
          navigator.geolocation.getCurrentPosition(
              pos => {
                cityEl.innerText = `GPS å®šä½æˆåŠŸ`;
                fetch3DayWeather(pos.coords.latitude, pos.coords.longitude, "weather-current", "wear-current");
              }, 
              err => { cityEl.innerHTML = `<span class="text-[#a09a93]">å®šä½å¤±æ•—</span>`; },
              { enableHighAccuracy: false, timeout: 5000 }
          );
        }

        function init() {
            createAttractionMap();
            renderFlightTable('outbound');
            renderAccommodation();
            renderSidebar(); // New: dynamic sidebar
            renderItinerary('phase1'); // Load first phase
            renderAttractions('all');
            renderDining('all');
            loadCurrentLocationWeather();       
            fetch3DayWeather(37.7749, -122.4194, "weather-sf", "wear-sf");
            fetch3DayWeather(34.0522, -118.2437, "weather-la", "wear-la");
        }

        function scrollToSection(id) {
            const el = document.getElementById(id);
            if (!el) return;
            const nav = document.querySelector('nav');
            const offset = nav ? nav.offsetHeight + 8 : 0;
            const y = el.getBoundingClientRect().top + window.scrollY - offset;
            window.scrollTo({ top: y, behavior: 'smooth' });
        }

        function switchFlightTab(type) {
            document.getElementById('btn-outbound').className = 'tab-inactive text-sm transition-all pb-2 hover:text-[#3a3a3a]';
            document.getElementById('btn-inbound').className = 'tab-inactive text-sm transition-all pb-2 hover:text-[#3a3a3a]';

            const activeBtn = document.getElementById(`btn-${type}`);
            activeBtn.className = 'tab-active text-sm transition-all pb-2';

            renderFlightTable(type);
        }

        function renderFlightTable(type) {
            const data = flightData[type];
            if (!data) return;

            const container = document.getElementById('flight-content');
            let html = '';
            
            data.forEach((flight, index) => {
                html += `
                    <div class="flex items-start p-4 bg-[#fbf7f2] rounded-xl border border-[#efe6d8] mb-3 last:mb-0 hover:border-[#d6b98c] transition-colors">
                        <div class="flex-shrink-0 bg-[#d6b98c] text-white rounded-lg w-10 h-10 flex items-center justify-center font-bold mr-4 text-sm shadow-sm">
                            ${index + 1}
                        </div>
                        <div class="flex-grow">
                            <div class="flex items-center justify-between mb-2">
                                <span class="font-bold text-[#3a3a3a] text-lg">${flight.leg}</span>
                                <span class="text-xs font-bold text-[#a4855d] bg-[#faf7f2] px-2 py-1 rounded-md border border-[#efe6d8]">CX${(flight.number || '').replace('CX','')}</span>
                            </div>
                            <div class="mb-2">
                                <span class="text-xs font-medium bg-[#fef3c7] text-[#92400e] px-2 py-0.5 rounded-full">${flight.note}</span>
                            </div>
                            <div class="grid grid-cols-2 gap-4 text-sm text-[#6b6b6b] mt-2">
                                <div class="bg-white p-2 rounded border border-[#efe6d8]">
                                    <span class="block text-xs text-[#a09a93] uppercase">Departure</span>
                                    <span class="font-mono font-bold text-[#3a3a3a]">${flight.date}</span>
                                </div>
                                <div class="bg-white p-2 rounded border border-[#efe6d8]">
                                    <span class="block text-xs text-[#a09a93] uppercase">Arrival</span>
                                    <span class="font-mono font-bold text-[#3a3a3a]">${flight.arr}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            html += `
                <div class="mt-6 p-4 border border-[#cfdde6] bg-[#f0f9ff] rounded-xl space-y-3">
                    <h4 class="text-base font-bold text-[#0f766e] flex items-center">
                        <span class="text-xl mr-2">ğŸ›„</span> åœ‹æ³°èˆªç©ºå ±åˆ°æŒ‡å¼•
                    </h4>
                    <div class="flex items-center justify-between">
                         <div class="text-sm text-[#115e59]">
                             <span class="font-bold">ç·šä¸Šå ±åˆ°ï¼š</span>èµ·é£›å‰ 48 å°æ™‚
                         </div>
                         <a href="https://www.cathaypacific.com/mb/?cxsource=TOP-NAV_FLIGHTS_3_1#!/zh_TW/olci/login" target="_blank" class="px-3 py-1 bg-[#0f766e] text-white text-xs font-bold rounded hover:bg-[#115e59] transition-colors">
                            å‰å¾€å®˜ç¶²
                        </a>
                    </div>
                    <p class="text-xs text-[#991b1b] font-bold bg-[#fef2f2] p-2 rounded border border-[#fecaca]">
                        * TPE æ«ƒæª¯ï¼šæ¡ƒåœ’æ©Ÿå ´ç¬¬äºŒèˆªå»ˆ (é€šå¸¸ D/E å€)
                    </p>
                </div>
            `;
            container.innerHTML = html;
        }

        // æ¸²æŸ“ä½å®¿è³‡è¨Š
        const toUTCDate = iso => {
            const d = new Date(iso);
            return new Date(Date.UTC(d.getFullYear(), d.getMonth(), d.getDate()));
        };
        
        function renderAccommodation() {
            const container = document.getElementById('accommodation-content');
            // Support both array (from Excel) and object (legacy)
            const accommodations = Array.isArray(accommodationData) ? accommodationData : Object.values(accommodationData);
            let html = '';

            const tripStartUTC = toUTCDate("2026-02-26");
            
            // Update badges to match earthy theme
            const cityStyle = {
                "èˆŠé‡‘å±±": "bg-[#cfdde6] text-[#475569]",
                "è’™ç‰¹é›·": "bg-[#fef3c7] text-[#92400e]",
                "è«ç¾…è²": "bg-[#d9e5d8] text-[#166534]",
                "æ´›æ‰ç£¯": "bg-[#f3e8ff] text-[#6b21a8]"
            };

            accommodations.forEach(hotel => {
                const checkin = toUTCDate(hotel.checkinDate);
                const checkout = toUTCDate(hotel.checkoutDate);
                const nights = Math.max(0, Math.floor((checkout - checkin) / 86400000));
                const dayIndex = Math.floor((checkin - tripStartUTC) / 86400000) + 1;

                html += `
                <div class="card-hover rounded-2xl p-6 flex flex-col justify-between group h-full">
                    <!-- ä¸Šæ–¹æ¨™ç±¤ -->
                    <div class="flex justify-between items-center mb-4">
                        <span class="font-bold text-white bg-[#d6b98c] px-3 py-0.5 rounded text-xs">Day ${dayIndex}</span>
                        <span class="text-xs font-semibold text-[#6b6b6b] bg-[#faf7f2] px-2 py-0.5 rounded-full border border-[#efe6d8]">${nights} æ™š</span>
                    </div>

                    <!-- é£¯åº—åç¨± -->
                    <h4 class="text-lg font-bold mb-2 text-[#3a3a3a] group-hover:text-[#d6b98c] transition-colors"> ${hotel.name}</h4>

                    <!-- åŸå¸‚ badge -->
                    <div class="mb-3">
                         <span class="inline-block text-xs font-bold px-2 py-1 rounded-md ${cityStyle[hotel.city] || 'bg-gray-100 text-gray-600'}">
                            ${hotel.city}
                        </span>
                    </div>

                    <!-- æ—¥æœŸ -->
                    <div class="bg-[#faf7f2] p-2 rounded mb-3 border border-[#efe6d8]">
                        <p class="text-xs text-[#6b6b6b]">
                            ğŸ“… <span class="font-semibold">${hotel.checkinDate.slice(5)}</span> - <span class="font-semibold">${hotel.checkoutDate.slice(5)}</span>
                        </p>
                    </div>

                    <!-- æˆ¿å‹ -->
                    <p class="text-sm text-[#6b6b6b] mb-2 font-medium">
                        ğŸ›ï¸ ${hotel.room}
                    </p>

                    <!-- é‡é» -->
                    <p class="text-xs text-[#a09a93] mb-4 line-clamp-2">
                        ${hotel.highlight}ï½œ${hotel.facilities}
                    </p>

                    <!-- åœ°åœ– -->
                    <a href="${hotel.mapLink}" target="_blank"
                       class="mt-auto w-full text-center py-2 rounded-lg bg-[#faf7f2] text-[#a4855d] text-sm font-bold hover:bg-[#d6b98c] hover:text-white transition-colors flex justify-center items-center gap-1 border border-[#efe6d8]">
                       ğŸ“ Google Maps
                    </a>

                </div>
                `;
            });

            container.innerHTML = html;
        }

        // --- EXCEL & DYNAMIC ITINERARY FUNCTIONS ---

        // 1. ä¸‹è¼‰å¤šå·¥ä½œè¡¨ç¯„æœ¬
        function downloadTemplate() {
            const wb = XLSX.utils.book_new();

            // 1. Itinerary Sheet
            const itineraryHeaders = ["phase_id", "phase_title", "date", "location", "activity", "details", "transport", "hotel", "attraction_key"];
            let itineraryRows = [itineraryHeaders];
            Object.keys(itineraryData).forEach(key => {
                const phase = itineraryData[key];
                phase.days.forEach(day => {
                    itineraryRows.push([
                        key, phase.title, day.date, day.loc, day.act,
                        day.detail.replace(/<div class="h-2"><\/div>/g, "<br>"),
                        day.transport, day.hotel, day.attractionKey || ""
                    ]);
                });
            });
            const wsItinerary = XLSX.utils.aoa_to_sheet(itineraryRows);
            XLSX.utils.book_append_sheet(wb, wsItinerary, "Itinerary");

            // 2. Flights Sheet
            const flightHeaders = ["direction", "leg", "date", "arrival", "note", "number"];
            let flightRows = [flightHeaders];
            flightData.outbound.forEach(f => flightRows.push(["outbound", f.leg, f.date, f.arr, f.note, f.number]));
            flightData.inbound.forEach(f => flightRows.push(["inbound", f.leg, f.date, f.arr, f.note, f.number]));
            const wsFlights = XLSX.utils.aoa_to_sheet(flightRows);
            XLSX.utils.book_append_sheet(wb, wsFlights, "Flights");

            // 3. Accommodation Sheet
            const accHeaders = ["city", "name", "checkinDate", "checkoutDate", "room", "highlight", "facilities", "address", "mapLink"];
            let accRows = [accHeaders];
            // Support object or array source
            const accList = Array.isArray(accommodationData) ? accommodationData : Object.values(accommodationData);
            accList.forEach(a => accRows.push([a.city, a.name, a.checkinDate, a.checkoutDate, a.room, a.highlight, a.facilities, a.address, a.mapLink]));
            const wsAcc = XLSX.utils.aoa_to_sheet(accRows);
            XLSX.utils.book_append_sheet(wb, wsAcc, "Accommodation");

            // 4. Dining Sheet
            const diningHeaders = ["city", "name", "type", "desc", "icon", "url"];
            let diningRows = [diningHeaders];
            diningData.forEach(d => diningRows.push([d.city, d.name, d.type, d.desc.replace(/<\/br>/g, "\n"), d.icon, d.url]));
            const wsDining = XLSX.utils.aoa_to_sheet(diningRows);
            XLSX.utils.book_append_sheet(wb, wsDining, "Dining");

            // 5. Attractions Sheet
            const attrHeaders = ["city", "name", "type", "desc", "short_desc", "icon", "url"];
            let attrRows = [attrHeaders];
            attractions.forEach(a => attrRows.push([a.city, a.name, a.type, a.desc, a.short_desc, a.icon, a.url]));
            const wsAttr = XLSX.utils.aoa_to_sheet(attrRows);
            XLSX.utils.book_append_sheet(wb, wsAttr, "Attractions");

            // ä¸‹è¼‰æª”æ¡ˆ
            XLSX.writeFile(wb, "My_Trip_Full_Plan.xlsx");
        }

        // 2. è™•ç† Excel ä¸Šå‚³ (æ”¯æ´å¤š Sheet)
        function handleExcelUpload(input) {
            const file = input.files[0];
            const status = document.getElementById('upload-status');
            
            if (!file) return;

            status.classList.remove('hidden');
            status.innerText = "æ­£åœ¨è®€å–æª”æ¡ˆ...";

            const reader = new FileReader();

            reader.onload = function(e) {
                try {
                    const data = new Uint8Array(e.target.result);
                    const workbook = XLSX.read(data, {type: 'array'});
                    
                    // --- 1. Process Itinerary ---
                    if (workbook.Sheets['Itinerary']) {
                        const jsonData = XLSX.utils.sheet_to_json(workbook.Sheets['Itinerary']);
                        const newItineraryData = {};
                        jsonData.forEach(row => {
                            const pid = row.phase_id || 'phase1';
                            if (!newItineraryData[pid]) {
                                newItineraryData[pid] = {
                                    title: row.phase_title || "My Phase",
                                    icon: "ğŸ“",
                                    badgeClass: "bg-[#cfdde6] text-[#475569]",
                                    dateRange: "",
                                    desc: "è‡ªå®šç¾©è¡Œç¨‹",
                                    days: []
                                };
                                if(pid.includes('1')) { newItineraryData[pid].icon = "ğŸŒ‰"; }
                                else if(pid.includes('2')) { newItineraryData[pid].icon = "ğŸŒŠ"; newItineraryData[pid].badgeClass = "bg-[#fef3c7] text-[#92400e]"; }
                                else if(pid.includes('3')) { newItineraryData[pid].icon = "ğŸ¡"; newItineraryData[pid].badgeClass = "bg-[#f3e8ff] text-[#6b21a8]"; }
                            }
                            newItineraryData[pid].days.push({
                                date: row.date || "TBD",
                                loc: row.location || "",
                                act: row.activity || "",
                                detail: row.details ? row.details.toString().replace(/\r\n/g, "<br>").replace(/\n/g, "<br>") : "",
                                transport: row.transport || "",
                                hotel: row.hotel || "",
                                attractionKey: row.attraction_key || ""
                            });
                        });
                        itineraryData = newItineraryData;
                        renderSidebar();
                        renderItinerary(Object.keys(itineraryData)[0]);
                    }

                    // --- 2. Process Flights ---
                    if (workbook.Sheets['Flights']) {
                        const jsonData = XLSX.utils.sheet_to_json(workbook.Sheets['Flights']);
                        const newFlightData = { outbound: [], inbound: [] };
                        jsonData.forEach(row => {
                            const flight = {
                                leg: row.leg,
                                date: row.date,
                                arr: row.arrival,
                                note: row.note,
                                number: row.number
                            };
                            if (row.direction === 'outbound') newFlightData.outbound.push(flight);
                            else if (row.direction === 'inbound') newFlightData.inbound.push(flight);
                        });
                        flightData = newFlightData;
                        renderFlightTable('outbound');
                    }

                    // --- 3. Process Accommodation ---
                    if (workbook.Sheets['Accommodation']) {
                        // Directly map to array of objects
                        accommodationData = XLSX.utils.sheet_to_json(workbook.Sheets['Accommodation']);
                        renderAccommodation();
                    }

                    // --- 4. Process Dining ---
                    if (workbook.Sheets['Dining']) {
                        diningData = XLSX.utils.sheet_to_json(workbook.Sheets['Dining']).map(d => ({
                            ...d,
                            desc: d.desc ? d.desc.replace(/\n/g, "</br>") : ""
                        }));
                        renderDining('all');
                    }

                    // --- 5. Process Attractions ---
                    if (workbook.Sheets['Attractions']) {
                        attractions = XLSX.utils.sheet_to_json(workbook.Sheets['Attractions']);
                        createAttractionMap(); // Important: rebuild the map for itinerary linking
                        renderAttractions('all');
                    }

                    status.innerText = "âœ… åŒ¯å…¥æˆåŠŸï¼æ‰€æœ‰è³‡æ–™å·²æ›´æ–°ã€‚";
                    status.className = "text-xs text-green-600 w-full mt-2 font-bold";

                } catch (error) {
                    console.error(error);
                    status.innerText = "âŒ è®€å–å¤±æ•—ï¼Œè«‹ç¢ºèªæª”æ¡ˆæ ¼å¼æ­£ç¢ºã€‚";
                    status.className = "text-xs text-red-600 w-full mt-2 font-bold";
                }
            };

            reader.readAsArrayBuffer(file);
        }

        // 3. å‹•æ…‹ç”¢ç”Ÿå´é‚Šæ¬„ (å–ä»£åŸæœ¬å¯«æ­»çš„ HTML)
        function renderSidebar() {
            const container = document.getElementById('phase-nav-content');
            container.innerHTML = ''; // Clear existing

            Object.keys(itineraryData).forEach((key, index) => {
                const phase = itineraryData[key];
                const btnId = `nav-${key}`;
                
                // Determine margin top based on index to mimic original design
                const mt = index > 0 ? "mt-4 md:mt-0" : "";
                
                const html = `
                <button onclick="renderItinerary('${key}')" id="${btnId}"
                  class="phase-nav-btn w-full text-left p-6 rounded-2xl transition-all duration-300 border border-transparent group relative overflow-hidden bg-white shadow-sm hover:border-[#d6b98c] ${mt}">
                    <div class="absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity">
                        <span class="text-6xl text-[#3a3a3a]">${phase.icon}</span>
                    </div>
                    <div class="relative z-10">
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-xs font-bold px-2 py-1 rounded ${phase.badgeClass} uppercase tracking-wider">Part ${index + 1}</span>
                            <span class="text-xs text-[#a09a93] font-medium">${phase.dateRange || ""}</span>
                        </div>
                        <h3 class="text-xl font-bold text-[#3a3a3a] mb-1 group-hover:text-[#d6b98c] transition-colors">${phase.title}</h3>
                        <p class="text-sm text-[#6b6b6b] line-clamp-2">${phase.desc}</p>
                    </div>
                </button>
                `;
                container.innerHTML += html;
            });
        }

        // --- Itinerary Logic ---
        function generatePhaseMapUrl(phaseKey) {
            let poiList = [];
            // Basic fallback for standard phases, custom phases will have generic search
            if (phaseKey === 'phase1') poiList = ["Riu Plaza Fisherman's Wharf", "Alcatraz Island", "Golden Gate Bridge", "Lombard Street", "Chase Center"];
            else if (phaseKey === 'phase2') poiList = ["Carmel-by-the-Sea", "Bixby Bridge", "Hearst Castle", "Morro Bay", "Solvang"];
            else if (phaseKey === 'phase3') poiList = ["Hollywood Franklin Hotel", "Santa Monica Pier", "Disneyland Park", "Universal Studios Hollywood", "Griffith Observatory"];
            
            // If custom phase or no predefined POIs, try to grab from locations in data
            if (poiList.length === 0 && itineraryData[phaseKey]) {
                poiList = itineraryData[phaseKey].days.map(d => d.attractionKey || d.hotel).filter(x => x);
            }

            const query = poiList.join(' and '); 
            return "https://www.google.com/maps/search/?api=1&query=" + encodeURIComponent(query);
        }

        function getAttractionBadgeColor(type) {
            if (type === 'History') return 'bg-[#fef3c7] text-[#92400e] border-[#fcd34d]'; // Amber
            if (type === 'Nature') return 'bg-[#dcfce7] text-[#166534] border-[#86efac]'; // Green
            if (type === 'Fun') return 'bg-[#fce7f3] text-[#9d174d] border-[#fbcfe8]'; // Pink
            if (type === 'Food') return 'bg-[#ffedd5] text-[#9a3412] border-[#fdba74]'; // Orange
            if (type === 'Photo') return 'bg-[#fee2e2] text-[#991b1b] border-[#fca5a5]'; // Red
            if (type === 'Culture') return 'bg-[#ccfbf1] text-[#115e59] border-[#5eead4]'; // Teal
            return 'bg-gray-100 text-gray-600';
        }

        function activatePhaseNav(activeKey) {
            // Deactivate all buttons first
            document.querySelectorAll('.phase-nav-btn').forEach(el => {
                el.classList.remove('border-[#d6b98c]', 'shadow-md');
                el.classList.add('border-transparent');
            });

            // Activate specific button
            const activeBtn = document.getElementById(`nav-${activeKey}`);
            if (activeBtn) {
                activeBtn.classList.add('border-[#d6b98c]', 'shadow-md');
                activeBtn.classList.remove('border-transparent');
            }
        }        
  
        function renderItinerary(phaseKey) {
            const phase = itineraryData[phaseKey];
            const container = document.getElementById('itinerary-details');
            const headerContainer = document.getElementById('itinerary-header');
            
            if (!phase || !container) return;

            activatePhaseNav(phaseKey);
            const mapUrl = generatePhaseMapUrl(phaseKey);

            // Theme colors (Updated to Earthy Tones)
            let theme = { text: 'text-[#a4855d]', bg: 'bg-[#faf7f2]', accent: 'bg-[#d6b98c]', border: 'border-[#efe6d8]' };
            
            // Header
            headerContainer.innerHTML = `
                <div>
                    <h3 class="text-xl font-bold text-[#3a3a3a]">${phase.title}</h3>
                    <div class="h-1 w-12 ${theme.accent} rounded-full mt-1"></div>
                </div>
                <a href="${mapUrl}" target="_blank" class="flex items-center gap-2 px-4 py-2 rounded-full ${theme.bg} text-[#a4855d] text-sm font-bold hover:bg-white hover:shadow-md transition-all border border-[#efe6d8]">
                    <span>ğŸ—ºï¸ åœ°åœ–æ¨¡å¼</span>
                </a>
            `;

            let html = `<div class="relative space-y-12 py-4">`;
            html += `<div class="absolute left-[19px] top-6 bottom-6 w-0.5 bg-[#efe6d8] timeline-line md:block hidden"></div>`;

            phase.days.forEach((day, idx) => {
              const attraction = day.attractionKey ? attractionMap[day.attractionKey] : null;
              
              let attractionHtml = '';
              if (attraction) {
                const badgeColor = getAttractionBadgeColor(attraction.type);
                attractionHtml = `
                    <div onclick="scrollToSection('highlights')" class="mt-4 bg-white border border-[#efe6d8] rounded-xl p-3 flex items-start gap-3 cursor-pointer hover:shadow-md hover:border-[#d6b98c] transition-all group/card">
                        <div class="text-2xl bg-[#faf7f2] rounded-lg p-2 group-hover/card:scale-110 transition-transform">${attraction.icon}</div>
                        <div>
                            <div class="flex items-center gap-2 mb-1">
                                <span class="text-xs font-bold border px-1.5 rounded ${badgeColor}">é‡é»è¡Œç¨‹</span>
                                <h5 class="text-sm font-bold text-[#3a3a3a] group-hover/card:text-[#d6b98c] transition-colors">${attraction.name}</h5>
                            </div>
                            <p class="text-xs text-[#a09a93] line-clamp-1">${attraction.short_desc}</p>
                        </div>
                    </div>
                `;
              } else if (day.attractionKey) {
                   attractionHtml = `
                    <div class="mt-4 bg-white border border-[#efe6d8] rounded-xl p-3 flex items-start gap-3">
                         <div class="text-2xl bg-[#faf7f2] rounded-lg p-2">ğŸ“</div>
                         <div>
                            <h5 class="text-sm font-bold text-[#3a3a3a]">${day.attractionKey}</h5>
                        </div>
                    </div>
                   `;
              }

              let hotelHtml = '';
              const accList = Array.isArray(accommodationData) ? accommodationData : Object.values(accommodationData);
              const currentHotel = accList.find(h => h.name === day.hotel);
              
              if (currentHotel) {
                   hotelHtml = `
                    <div class="mt-2 inline-flex items-center gap-1.5 text-xs text-[#6b6b6b] bg-[#faf7f2] px-2 py-1 rounded-md border border-[#efe6d8]">
                        <span>ğŸ›Œ</span> ä½å®¿ï¼š${currentHotel.name}
                    </div>`;
              } else if (day.hotel) {
                  hotelHtml = `
                    <div class="mt-2 inline-flex items-center gap-1.5 text-xs text-[#6b6b6b] bg-[#faf7f2] px-2 py-1 rounded-md border border-[#efe6d8]">
                        <span>ğŸ›Œ</span> ä½å®¿ï¼š${day.hotel}
                    </div>`;
              }

              html += `
                <div class="relative flex gap-6 group animate-fade-in" style="animation-delay: ${idx * 100}ms">
                    <!-- Timeline Marker -->
                    <div class="hidden md:flex flex-col items-center">
                        <div class="w-10 h-10 rounded-full bg-[#fbf7f2] text-[#a4855d] border-4 border-white shadow-md flex items-center justify-center font-bold z-10 text-sm group-hover:scale-110 transition-transform">
                            ${idx + 1}
                        </div>
                    </div>

                    <!-- Content Card -->
                    <div class="flex-1 bg-white rounded-2xl p-6 border border-[#efe6d8] shadow-sm hover:shadow-lg transition-shadow relative overflow-hidden">
                        <div class="absolute top-0 left-0 w-full h-1 bg-[#d6b98c]"></div>
                        
                        <div class="flex flex-wrap justify-between items-start mb-3 gap-2">
                            <span class="text-2xl font-black text-[#faf7f2] select-none absolute right-4 top-2">DAY ${idx + 1}</span>
                            <div class="flex items-center gap-2 z-10">
                                <span class="px-3 py-1 rounded-full bg-[#3a3a3a] text-white text-xs font-bold tracking-wide">${day.date.split(' ')[0]}</span>
                                <span class="text-sm font-bold text-[#a09a93] flex items-center gap-1">
                                    ğŸ“ ${day.loc}
                                </span>
                            </div>
                        </div>

                        <h4 class="text-xl font-bold text-[#3a3a3a] mb-3 relative z-10 group-hover:text-[#d6b98c] transition-colors">
                            ${day.act}
                        </h4>

                        <div class="text-sm text-[#6b6b6b] leading-relaxed mb-4 relative z-10 bg-[#fbf7f2] p-4 rounded-xl border border-[#efe6d8]">
                            ${day.detail.replace(/<br>/g, '<div class="h-2"></div>')}
                        </div>

                        ${attractionHtml}
                        ${hotelHtml}

                        <div class="mt-4 pt-3 border-t border-[#efe6d8] flex items-center gap-2 text-xs text-[#a09a93]">
                            <span class="bg-[#faf7f2] p-1 rounded">ğŸš— äº¤é€š</span>
                            <span>${day.transport || 'â€”'}</span>
                        </div>
                    </div>
                </div>
              `;
            });

            html += `</div>`;
            container.innerHTML = html;
        }

        // --- NEW: Toggle Function ---
        function toggleExpand(contentId, arrowId) {
            const content = document.getElementById(contentId);
            const arrow = document.getElementById(arrowId);
            if (content && arrow) {
                content.classList.toggle('open');
                arrow.classList.toggle('open');
            }
        }

        // --- NEW: Dining Logic (Updated for Expandable) ---
        function filterDining(filter) {
            document.querySelectorAll('.dining-filter-btn').forEach(btn => {
                btn.classList.remove('bg-[#3a3a3a]', 'text-white', 'shadow-md', 'scale-105');
                btn.classList.add('bg-white', 'text-[#6b6b6b]', 'border', 'border-[#efe6d8]');

                if (btn.dataset.filter === filter) {
                    btn.classList.add('bg-[#3a3a3a]', 'text-white', 'shadow-md', 'scale-105');
                    btn.classList.remove('bg-white', 'text-[#6b6b6b]', 'border', 'border-[#efe6d8]');
                }
            });
            renderDining(filter);
        }

        function renderDining(filter) {
            const container = document.getElementById('dining-grid');
            const filtered = filter === 'all' ? diningData : diningData.filter(d => d.city === filter);
            let html = '';
            
            filtered.forEach((item, index) => {
                let badgeClass = 'bg-[#faf7f2] text-[#6b6b6b]';
                let cityLabel = 'åœ°å€';
                if (item.city === 'SF') { badgeClass = 'bg-[#cfdde6] text-[#475569]'; cityLabel = 'èˆŠé‡‘å±±'; }
                else if (item.city === 'PCH') { badgeClass = 'bg-[#fef3c7] text-[#92400e]'; cityLabel = 'ä¸€è™Ÿå…¬è·¯'; }
                else if (item.city === 'LA') { badgeClass = 'bg-[#f3e8ff] text-[#6b21a8]'; cityLabel = 'æ´›æ‰ç£¯'; }

                // ä½¿ç”¨ unique ID for toggling
                const descId = `dining-desc-${index}`;
                const arrowId = `dining-arrow-${index}`;

                // æ³¨æ„ï¼šå¤–å±¤æ”¹ç‚º divï¼Œä¸ä½œç‚ºé€£çµï¼Œé¿å…é»æ“Šè¡çª
                html += `
                    <div class="card-hover rounded-2xl p-6 group block relative overflow-hidden h-full flex flex-col justify-between">
                        <div class="absolute top-0 right-0 w-24 h-24 bg-[#faf7f2] rounded-full -mr-10 -mt-10 transition-transform group-hover:scale-150 group-hover:bg-[#d6b98c]/20"></div>
                        
                        <div>
                            <div class="relative z-10 flex justify-between items-start mb-4">
                                <div class="text-4xl shadow-sm bg-white rounded-full w-12 h-12 flex items-center justify-center border border-[#efe6d8]">${item.icon}</div>
                                <span class="text-xs px-2 py-1 rounded-full font-bold ${badgeClass}">${cityLabel}</span>
                            </div>
                            <h4 class="text-lg font-bold text-[#3a3a3a] mb-2 relative z-10 group-hover:text-[#d6b98c] transition-colors">${item.name}</h4>
                            
                            <!-- éš±è—çš„å…§å®¹ -->
                            <div id="${descId}" class="expandable-content relative z-10 text-sm text-[#6b6b6b] border-l-2 border-[#d6b98c] pl-3">
                                ${item.desc.replace(/<\/br>/g, '<br>')}
                            </div>
                        </div>
                        
                        <div class="relative z-10 flex items-center justify-between pt-4 border-t border-[#efe6d8] mt-4">
                            <!-- å±•é–‹æŒ‰éˆ• -->
                            <button onclick="toggleExpand('${descId}', '${arrowId}')" class="text-xs font-bold text-[#a09a93] hover:text-[#d6b98c] transition-colors flex items-center gap-1 focus:outline-none">
                                <span>é¤é»ä»‹ç´¹</span>
                                <svg id="${arrowId}" class="rotate-icon w-3 h-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" /></svg>
                            </button>

                            <!-- å®˜ç¶²é€£çµ -->
                            <a href="${item.url}" target="_blank" rel="noopener noreferrer" class="text-sm font-bold text-[#3a3a3a] hover:text-[#d6b98c] flex items-center gap-1">
                                <span>å®˜ç¶²</span>
                                <svg class="w-3 h-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" /></svg>
                            </a>
                        </div>
                    </div>
                `;
            });
            container.innerHTML = html;
        }

        // --- Attraction Logic (Updated for Expandable) ---
        function filterAttractions(filter) {
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('bg-[#3a3a3a]', 'text-white', 'shadow-md', 'scale-105');
                btn.classList.add('bg-white', 'text-[#6b6b6b]', 'border', 'border-[#efe6d8]');

                if(btn.dataset.filter === filter) {
                    btn.classList.add('bg-[#3a3a3a]', 'text-white', 'shadow-md', 'scale-105');
                    btn.classList.remove('bg-white', 'text-[#6b6b6b]', 'border', 'border-[#efe6d8]');
                }
            });
            renderAttractions(filter);
        }

        function renderAttractions(filter) {
            const container = document.getElementById('attraction-grid');
            const filtered = filter === 'all' ? attractions : attractions.filter(a => a.city === filter);
            let html = '';
            
            filtered.forEach((item, index) => {
                const badgeColor = getAttractionBadgeColor(item.type);
                const typeLabel = item.type === 'History' ? 'æ­·å²' : item.type === 'Nature' ? 'è‡ªç„¶' : item.type === 'Fun' ? 'å¨›æ¨‚' : item.type === 'Food' ? 'ç¾é£Ÿ' : item.type === 'Photo' ? 'æ”å½±' : item.type === 'Culture' ? 'æ–‡åŒ–' : 'å…¶ä»–';
                const cityLabel = item.city === 'SF' ? 'èˆŠé‡‘å±±' : item.city === 'LA' ? 'æ´›æ‰ç£¯' : item.city === 'Yosemite' ? 'å„ªå‹ç¾åœ°' : 'ä¸€è™Ÿå…¬è·¯';

                const descId = `attr-desc-${index}`;
                const arrowId = `attr-arrow-${index}`;

                html += `
                    <div class="card-hover rounded-2xl overflow-hidden group block flex flex-col h-full">
                        <div class="p-6 flex-grow">
                            <div class="flex justify-between items-start mb-4">
                                <div class="text-4xl transform group-hover:scale-110 transition-transform duration-300">${item.icon}</div>
                                <div class="flex flex-col items-end gap-1">
                                    <span class="text-[10px] uppercase font-bold text-[#a09a93] tracking-wider">${cityLabel}</span>
                                    <span class="text-xs px-2 py-1 rounded-full font-bold border ${badgeColor}">${typeLabel}</span>
                                </div>
                            </div>
                            <h4 class="text-lg font-bold text-[#3a3a3a] mb-2 group-hover:text-[#d6b98c] transition-colors">${item.name}</h4>
                            
                            <!-- éš±è—çš„å…§å®¹ -->
                            <div id="${descId}" class="expandable-content text-sm text-[#6b6b6b] border-l-2 border-[#d6b98c] pl-3">
                                ${item.desc}
                            </div>
                        </div>
                        
                        <div class="bg-[#faf7f2] px-6 py-3 border-t border-[#efe6d8] flex justify-between items-center mt-auto">
                            <!-- å±•é–‹æŒ‰éˆ• -->
                            <button onclick="toggleExpand('${descId}', '${arrowId}')" class="text-xs font-bold text-[#a09a93] hover:text-[#d6b98c] transition-colors flex items-center gap-1 focus:outline-none">
                                <span>æ™¯é»ä»‹ç´¹</span>
                                <svg id="${arrowId}" class="rotate-icon w-3 h-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" /></svg>
                            </button>

                            <!-- å®˜ç¶²é€£çµ -->
                             <a href="${item.url}" target="_blank" rel="noopener noreferrer" class="text-[#a09a93] group-hover:text-[#d6b98c] group-hover:translate-x-1 transition-all text-xs font-bold flex items-center">
                                å‰å¾€å®˜ç¶² â”
                            </a>
                        </div>
                    </div>
                `;
            });
            container.innerHTML = html;
        }

        // Initialize App
        window.addEventListener('DOMContentLoaded', init);

    </script>
</body>
</html>
