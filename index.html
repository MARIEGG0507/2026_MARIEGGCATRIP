<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026 ç¾è¥¿èˆŠé‡‘å±±èˆ‡æ´›æ‰ç£¯ä¹‹æ—…</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <link rel="stylesheet" href="styles.css">    
    
    <!-- Application Structure Plan:
         1. Hero Section: Title, Dates, and high-level trip stats (Days, Cities).
         2. Navigation: Simple sticky sub-nav to jump between Logistics, Itinerary, and Highlights.
         3. Logistics Hub: Interactive section for Flights (toggle View) and Essential Info (Cards). Includes a Weather Comparison Chart (Chart.js) to visualize clothing needs. NOW includes a 13-Day Daily Forecast and Accommodation Summary.
         4. The Journey (Itinerary): A split-view interactive timeline. Left side lists the 3 major phases (SF, PCH, LA). Clicking a phase reveals detailed day-by-day activities on the right. (Daily itinerary includes Attraction Details.)
         5. Destination Discovery (Attractions): A filterable grid of attraction cards.
         6. Footer: Simple closing.
    -->
</head>
<body class="antialiased min-h-screen flex flex-col">

    <!-- Hero Section -->
    <header class="bg-white shadow-sm border-b border-gray-100">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 text-center">
            <h1 class="text-4xl font-extrabold tracking-tight text-gray-900 sm:text-5xl mb-2">
                2026 ç¾è¥¿èˆŠé‡‘å±±èˆ‡æ´›æ‰ç£¯ä¹‹æ—…
            </h1>
            <p class="text-lg text-gray-600 mb-6">
                2æœˆ26æ—¥ - 3æœˆ11æ—¥ Â· 13 å¤© 12 å¤œ Â· åŠ å·å¤¢å¹»è¡Œ
            </p>
            
            <nav aria-label="ä¸»è¦æ™¯é»é€£çµ" class="flex flex-wrap justify-center space-x-4 md:space-x-8 text-sm font-medium text-gray-500">
                <a href="https://www.sftravel.com/" target="_blank" class="flex flex-col items-center hover:text-blue-600 hover:scale-110 transition-all cursor-pointer" title="å‰å¾€èˆŠé‡‘å±±æ—…éŠå±€å®˜ç¶²">
                    <span class="text-2xl mb-1" aria-hidden="true">ğŸŒ‰</span>
                    <span>èˆŠé‡‘å±±</span>
                </a>
                <a href="https://www.nps.gov/yose/index.htm" target="_blank" class="flex flex-col items-center hover:text-green-600 hover:scale-110 transition-all cursor-pointer" title="å‰å¾€å„ªå‹ç¾åœ°åœ‹å®¶å…¬åœ’å®˜ç¶²">
                    <span class="text-2xl mb-1" aria-hidden="true">ğŸŒ²</span>
                    <span>å„ªå‹ç¾åœ°</span>
                </a>
                <a href="https://www.visitcalifornia.com/road-trips/highway-one-classic/" target="_blank" class="flex flex-col items-center hover:text-yellow-600 hover:scale-110 transition-all cursor-pointer" title="å‰å¾€åŠ å·æ—…éŠå±€-ä¸€è™Ÿå…¬è·¯ä»‹ç´¹">
                    <span class="text-2xl mb-1" aria-hidden="true">ğŸš—</span>
                    <span>ä¸€è™Ÿå…¬è·¯</span>
                </a>
                <a href="https://www.discoverlosangeles.com/" target="_blank" class="flex flex-col items-center hover:text-purple-600 hover:scale-110 transition-all cursor-pointer" title="å‰å¾€æ´›æ‰ç£¯æ—…éŠå±€å®˜ç¶²">
                    <span class="text-2xl mb-1" aria-hidden="true">ğŸ¬</span>
                    <span>æ´›æ‰ç£¯</span>
                </a>
                <a href="disneyland_itinerary.html" target="_blank" class="flex flex-col items-center hover:text-red-600 hover:scale-110 transition-all cursor-pointer" title="å‰å¾€è¿ªå£«å°¼æ¨‚åœ’å®˜ç¶²">
                    <span class="text-2xl mb-1" aria-hidden="true">ğŸ°</span>
                    <span>è¿ªå£«å°¼æ¨‚åœ’</span>
                </a>
                <a href="universal_hollywood.html" target="_blank" class="flex flex-col items-center hover:text-orange-600 hover:scale-110 transition-all cursor-pointer" title="å‰å¾€ç’°çƒå½±åŸå®˜ç¶²">
                    <span class="text-2xl mb-1" aria-hidden="true">ğŸ¥</span>
                    <span>ç’°çƒå½±åŸ</span>
                </a>
            </nav>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="sticky top-0 z-50 bg-white/95 backdrop-blur shadow-sm">
        <div class="max-w-7xl mx-auto px-4">
            <ul class="flex justify-center space-x-8 h-12 items-center">
                <li><button onclick="scrollToSection('logistics')" class="text-gray-600 hover:text-yellow-600 px-3 py-2 text-sm font-medium transition-colors">è¡Œå‰æº–å‚™ & èˆªç­</button></li>
                <li><button onclick="scrollToSection('itinerary')" class="text-gray-600 hover:text-yellow-600 px-3 py-2 text-sm font-medium transition-colors">æ¯æ—¥è¡Œç¨‹</button></li>
                <li><button onclick="scrollToSection('highlights')" class="text-gray-600 hover:text-yellow-600 px-3 py-2 text-sm font-medium transition-colors">æ™¯é»æ¢ç´¢</button></li>
            </ul>
        </div>
    </nav>

    <main class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full space-y-16">

        <!-- Section 1: Logistics Hub -->
        <section id="logistics" class="scroll-mt-20">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold text-gray-900">ğŸ›« è¡Œå‰æº–å‚™èˆ‡è³‡è¨Š</h2>
                <p class="mt-2 text-gray-600 max-w-2xl mx-auto">
                    åŒ…å«èˆªç­æ™‚é–“ã€å¿…å‚™æ–‡ä»¶æª¢æŸ¥ã€ä»¥åŠç•¶åœ°å¤©æ°£é æ¸¬ï¼Œå”åŠ©æ‚¨æ‰“åŒ…è¡Œæèˆ‡è¦åŠƒæŠµé”äº‹å®œã€‚
                </p>
            </div>
 
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- Flight Info -->
                <div class="bg-white rounded-2xl shadow-lg p-6 border border-gray-100">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-xl font-bold text-gray-800">âœˆï¸ èˆªç­è³‡è¨Š</h3>
                        <div class="flex space-x-2 bg-gray-100 rounded-lg p-1">
                            <button onclick="switchFlightTab('outbound')" id="btn-outbound" class="px-3 py-1 rounded-md text-sm font-medium transition-colors bg-white shadow text-gray-900">å»ç¨‹</button>
                            <button onclick="switchFlightTab('inbound')" id="btn-inbound" class="px-3 py-1 rounded-md text-sm font-medium transition-colors text-gray-500 hover:text-gray-900">å›ç¨‹</button>
                        </div>
                    </div>
                    
                    <div id="flight-content" class="space-y-4">
                        <!-- Dynamic Content Loaded via JS -->
                    </div>
                </div>
            
                <!-- Weather & Tips -->
                <div class="bg-white rounded-2xl shadow-lg p-6 border border-gray-100 flex flex-col">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">ğŸŒ¡ï¸ æ°£æº«è¶¨å‹¢èˆ‡ç©¿è‘—å»ºè­°</h3>
                    <div class="flex-grow flex flex-col justify-center">
                        <div class="chart-container mb-4">
                            <canvas id="weatherChart"></canvas>
                        </div>
                        <div class="bg-yellow-50 p-4 rounded-lg text-sm text-yellow-800 border border-yellow-100">
                            <strong>ğŸ’¡ ç©¿æ­ç­†è¨˜ï¼š</strong> èˆŠé‡‘å±±æº«å·®å¤§ä¸”å¤šé¢¨ï¼Œå»ºè­°ã€Œæ´‹è”¥å¼ç©¿æ³•ã€ä¸¦æ”œå¸¶é˜²é¢¨å¤–å¥—ï¼›æ´›æ‰ç£¯ç™½å¤©æº«æš–ï¼Œå¯æº–å‚™è–„é•·è¢–ã€‚
                        </div>
                    </div>
                </div>
                <!-- 3-Day Weather Forecast -->
                <section id="weather-3day" class="mt-12">
                  <h3 class="text-2xl font-semibold text-center mb-6">
                    ğŸ“ æ‰€åœ¨åœ°å€ãƒ»æœªä¾† 3 å¤©å¤©æ°£
                  </h3>

                  <div class="grid md:grid-cols-3 gap-6">
                <!-- Current Location -->
                  <div class="bg-white rounded-2xl p-6 shadow-lg border">
                  <h4 class="text-lg font-medium mb-1">ç›®å‰æ‰€åœ¨åœ°</h4>
                  <p class="text-sm text-gray-500 mb-4" id="current-city">å®šä½ä¸­â€¦</p>
                  <div id="weather-current" class="flex gap-4"></div>
                  <p id="wear-current" class="text-sm text-gray-600 mt-3"></p>
    </div>

                <!-- San Francisco -->
                  <div class="bg-white rounded-2xl p-6 shadow-lg border">
                  <h4 class="text-lg font-medium mb-1">èˆŠé‡‘å±±</h4>
                  <p class="text-sm text-gray-500 mb-4">San Francisco</p>
                  <div id="weather-sf" class="flex gap-4"></div>
                  <p id="wear-sf" class="text-sm text-gray-600 mt-3"></p>
    </div>

                <!-- Los Angeles -->
                  <div class="bg-white rounded-2xl p-6 shadow-lg border">
                  <h4 class="text-lg font-medium mb-1">æ´›æ‰ç£¯</h4>
                  <p class="text-sm text-gray-500 mb-4">Los Angeles</p>
                  <div id="weather-la" class="flex gap-4"></div>
                  <p id="wear-la" class="text-sm text-gray-600 mt-3"></p>
     </div>
  </div>
</section>
            </div>

            <!-- ACCOMMODATION SUMMARY -->
            <div class="mt-8 bg-white rounded-2xl shadow-lg p-6 border border-gray-100">
                <h3 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                    <span class="mr-2 text-2xl">ğŸ¨</span> ä½å®¿è¦åŠƒ
                </h3>
                <div id="accommodation-content" class="space-y-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    <!-- Dynamic Content Loaded via JS -->
                </div>
            </div>
            
            <!-- Essential Checklist Grid -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mt-8">
                <article class="bg-blue-50 p-4 rounded-xl border border-blue-100">
                    <div class="text-2xl mb-2" aria-hidden="true">ğŸ“„</div>
                    <h4 class="font-bold text-blue-900">è­‰ä»¶æª¢æŸ¥</h4>
                    <p class="text-sm text-blue-800 mt-1">è­·ç…§ã€ESTAã€åœ‹éš›é§•ç…§ã€å°ç£é§•ç…§æ­£æœ¬ã€‚</p>
                </article>
                <article class="bg-green-50 p-4 rounded-xl border border-green-100">
                    <div class="text-2xl mb-2" aria-hidden="true">ğŸ’µ</div>
                    <h4 class="font-bold text-green-900">è²¨å¹£å°è²»</h4>
                    <p class="text-sm text-green-800 mt-1">ä½¿ç”¨ USDã€‚é¤å»³å°è²»ç´„ 15-20%ã€‚æ¨™åƒ¹ä¸å«ç¨…ã€‚</p>
                </article>
                <article class="bg-purple-50 p-4 rounded-xl border border-purple-100">
                    <div class="text-2xl mb-2" aria-hidden="true">ğŸ“±</div>
                    <h4 class="font-bold text-purple-900">ç¶²è·¯é€šè¨Š</h4>
                    <p class="text-sm text-purple-800 mt-1">æå‰è³¼è²· SIM å¡æˆ–ç§Ÿå€Ÿ Wi-Fi æ©Ÿã€‚æ™‚å€æ…¢ 16 å°æ™‚ã€‚</p>
                </article>
                <article class="bg-red-50 p-4 rounded-xl border border-red-100">
                    <div class="text-2xl mb-2" aria-hidden="true">ğŸš—</div>
                    <h4 class="font-bold text-red-900">äº¤é€šé ˆçŸ¥</h4>
                    <p class="text-sm text-red-800 mt-1">SFæ­å¤§çœ¾é‹è¼¸ï¼›LAæ­Uberï¼›PCHè‡ªé§•å‰æŸ¥è·¯æ³ã€‚</p>
                </article>
            </div>


        </section>

        <!-- Section 2: Itinerary -->
        <section id="itinerary" class="scroll-mt-20">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold text-gray-900">ğŸ—ºï¸ 13 å¤©æ—…ç¨‹è¦åŠƒ</h2>
                <p class="mt-2 text-gray-600 max-w-2xl mx-auto">
                    è¡Œç¨‹åˆ†ç‚ºä¸‰å¤§ä¸»é¡Œéšæ®µã€‚é»é¸å·¦å´éšæ®µå¯æŸ¥çœ‹æ¯æ—¥è©³ç´°å®‰æ’èˆ‡**ç›¸é—œæ™¯é»äº®é»**ã€‚
                </p>
            </div>

            <div class="bg-white rounded-2xl shadow-xl overflow-hidden border border-gray-100 flex flex-col md:flex-row h-[600px]">
                <!-- Sidebar: Phases -->
                <div class="w-full md:w-1/3 bg-gray-50 border-r border-gray-200 overflow-y-auto custom-scroll">
                    <div class="p-4 space-y-2">
                        <button onclick="renderItinerary('phase1')" id="nav-phase1" class="w-full text-left p-4 rounded-xl transition-all border-l-4 border-blue-500 bg-white shadow-sm hover:bg-blue-50 group">
                            <div class="text-xs font-bold text-blue-500 uppercase tracking-wider mb-1">Phase 1 Â· 2/26 - 3/2</div>
                            <h3 class="text-lg font-bold text-gray-900 group-hover:text-blue-700">ä¸‰è—©å¸‚æ¼«éŠèˆ‡NBA</h3>
                            <p class="text-sm text-gray-500 mt-1">é‡‘é–€å¤§æ©‹ã€æƒ¡é­”å³¶ã€NBA è³½äº‹</p>
                        </button>

                        <button onclick="renderItinerary('phase2')" id="nav-phase2" class="w-full text-left p-4 rounded-xl transition-all border-l-4 border-transparent hover:border-yellow-500 hover:bg-yellow-50 group">
                            <div class="text-xs font-bold text-yellow-600 uppercase tracking-wider mb-1">Phase 2 Â· 3/3 - 3/5</div>
                            <h3 class="text-lg font-bold text-gray-900 group-hover:text-yellow-700">åŠ å·ä¸€è™Ÿå…¬è·¯</h3>
                            <p class="text-sm text-gray-500 mt-1">çµ•ç¾æµ·å²¸è‡ªé§•ã€èµ«æ°å¤å ¡</p>
                        </button>

                        <button onclick="renderItinerary('phase3')" id="nav-phase3" class="w-full text-left p-4 rounded-xl transition-all border-l-4 border-transparent hover:border-purple-500 hover:bg-purple-50 group">
                            <div class="text-xs font-bold text-purple-500 uppercase tracking-wider mb-1">Phase 3 Â· 3/6 - 3/9</div>
                            <h3 class="text-lg font-bold text-gray-900 group-hover:text-purple-700">å¤©ä½¿ä¹‹åŸèˆ‡é›™æ¨‚åœ’</h3>
                            <p class="text-sm text-gray-500 mt-1">è¿ªå£«å°¼ã€ç’°çƒå½±åŸã€æ˜Ÿå…‰å¤§é“</p>
                        </button>
                    </div>
                </div>

                <!-- Content: Daily Details -->
                <div class="w-full md:w-2/3 p-6 md:p-8 overflow-y-auto custom-scroll bg-white relative">
                    <div id="itinerary-details" class="space-y-8">
                        <!-- Content injected via JS -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 3: Highlights -->
        <section id="highlights" class="scroll-mt-20">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold text-gray-900">ğŸ›ï¸ ç²¾é¸æ™¯é»æ¢ç´¢</h2>
                <p class="mt-2 text-gray-600 max-w-2xl mx-auto">
                    æ¢ç´¢æœ¬æ¬¡æ—…ç¨‹çš„å¿…è¨ªäº®é»ã€‚**é»æ“Šä¸‹æ–¹æ™¯é»å¡ç‰‡å³å¯å‰å¾€å®˜æ–¹ç¶²ç«™ã€‚**
                </p>
            </div>

            <!-- Filters: Added Yosemite Button -->
            <div class="flex flex-wrap justify-center gap-2 mb-8">
                <button onclick="filterAttractions('all')" class="filter-btn px-4 py-2 rounded-full text-sm font-medium bg-gray-800 text-white shadow-md hover:bg-gray-700 transition-colors active-filter" data-filter="all">å…¨éƒ¨é¡¯ç¤º</button>
                <button onclick="filterAttractions('SF')" class="filter-btn px-4 py-2 rounded-full text-sm font-medium bg-white text-gray-600 border border-gray-200 hover:bg-blue-50 hover:text-blue-600 transition-colors" data-filter="SF">ğŸŒ‰ èˆŠé‡‘å±±</button>
                <button onclick="filterAttractions('Yosemite')" class="filter-btn px-4 py-2 rounded-full text-sm font-medium bg-white text-gray-600 border border-gray-200 hover:bg-green-50 hover:text-green-600 transition-colors" data-filter="Yosemite">ğŸŒ² å„ªå‹ç¾åœ°</button>
                <button onclick="filterAttractions('PCH')" class="filter-btn px-4 py-2 rounded-full text-sm font-medium bg-white text-gray-600 border border-gray-200 hover:bg-yellow-50 hover:text-yellow-600 transition-colors" data-filter="PCH">ğŸŒŠ ä¸€è™Ÿå…¬è·¯</button>
                <button onclick="filterAttractions('LA')" class="filter-btn px-4 py-2 rounded-full text-sm font-medium bg-white text-gray-600 border border-gray-200 hover:bg-purple-50 hover:text-purple-600 transition-colors" data-filter="LA">ğŸ¬ æ´›æ‰ç£¯</button>
            </div>

            <!-- Grid -->
            <div id="attraction-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Content injected via JS -->
            </div>
        </section>

    </main>

    <footer class="bg-gray-900 text-white py-12 mt-12">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <p class="text-2xl mb-4">ğŸ‡ºğŸ‡¸</p>
            <p class="text-gray-400">ç¥æ‚¨çš„ 2026 ç¾è¥¿ä¹‹æ—…å……æ»¿ç¾å¥½å›æ†¶ï¼</p>
            <div class="mt-8 text-xs text-gray-600">
                Generated from Travel Booklet Source Data
            </div>
        </div>
    </footer>

    <script>
        // --- Data Storage ---
        
        const flightData = {
            outbound: [
                { leg: "TPE âœ HKG", date: "2/26 20:15", arr: "22:00", note: "è½‰æ©Ÿ", number: "CX531" }, 
                { leg: "HKG âœ SFO", date: "2/26 01:00 (+1)", arr: "21:15 (2/26)", note: "éœ€èª¿æ•´æ™‚å·®", number: "CX872" }
            ],
            inbound: [
                { leg: "LAX âœ HKG", date: "3/09 22:15", arr: "05:05 (3/11)", note: "è·¨è¶Šåœ‹éš›æ›æ—¥ç·š", number: "CX883" },
                { leg: "HKG âœ TPE", date: "3/11 08:00", arr: "ä¸Šåˆ", note: "æŠµé”æº«æš–çš„å®¶", number: "CX488" }
            ]
        };
        
        const accommodationData = {
            sf: {
                name: "Riu Plaza Fisherman's Wharf",
                dates: "2/26 - 3/3 (5 æ™š)",
                city: "èˆŠé‡‘å±±",
                address: "2500 Mason Street, æ¼äººç¢¼é ­, èˆŠé‡‘å±±, CA 94133, ç¾åœ‹",
                mapLink: "https://www.google.com/maps?q=37.80699906469404,-122.41348274052166",
                status: "å·²ç¢ºèª (å«æ—©é¤)",
                icon: "ğŸŒ‰",
            },
            pch_carmel: {
                name: "éš†æ©æ©¡æœ¨é…’åº— (Lone Oak Inn)",
                dates: "3/3 (1 æ™š)",
                city: "è’™ç‰¹é›·/å¡æ¢…çˆ¾ (PCH)",
                address: "2221 North Fremont Street, è’™ç‰¹é›·, CA 93940, ç¾åœ‹",
                mapLink: "https://www.google.com/maps?q=36.5970385420236,-121.85806229710579", 
                status: "å·²ç¢ºèª (2 é–“æˆ¿, ä¸å«é¤é»)",
                icon: "ğŸŒ²",
            }, 
            pch_morro: {
                name: "æµ·æ¸¯å±‹é…’åº— (Harbor House Inn)",
                dates: "3/4 (1 æ™š)",
                city: "è«ç¾…è² (PCH)",
                address: "1095 Main Street, è«ç¾…è², CA 93442, ç¾åœ‹",
                mapLink: "https://www.google.com/maps?q=35.36818125561934,-120.85015922784805", 
                status: "å·²ç¢ºèª (æµ·æ™¯è±ªè¯æˆ¿)",
                icon: "ğŸŒŠ",
            },
            la_hollywood: {
                name: "The Hollywood Franklin Hotel near Universal Studios",
                dates: "3/5 - 3/9 (4 æ™š)",
                city: "å¥½èŠå¡¢ (æ´›æ‰ç£¯)",
                address: "6141 Franklin Avenue, å¥½èŠå¡¢, æ´›æ‰ç£¯, CA 90028, ç¾åœ‹",
                mapLink: "https://www.google.com/maps?q=34.10539309099251,-118.32347273826599",
                status: "å·²ç¢ºèª (ç¸½è¨ˆ 4 æ™š)",
                icon: "ğŸ¬",
            }
        };
        
        // æ™¯é»è³‡è¨Š (Attractions data) - ä¿æŒä¸è®Š
        const attractions = [
            // ... (æ­¤è™•çœç•¥å¤§é‡æ™¯é»æ•¸æ“šï¼Œå‡è¨­å·²æ›¿æ›) ...
            { name: "é‡‘é–€å¤§æ©‹ Golden Gate", city: "SF", type: "Photo", desc: "...", short_desc: "...", icon: "ğŸŒ‰", url: "https://www.goldengatebridge.org/" }, 
            // ... 
            { name: "å¥½èŠå¡¢ç’°çƒå½±åŸ Universal Studios", city: "LA", type: "Fun", desc: "...", short_desc: "...", icon: "ğŸ¬", url: "https://www.universalstudioshollywood.com/" },
        ];
         
        const itineraryData = {
            // ... (æ­¤è™•çœç•¥è¡Œç¨‹æ•¸æ“šï¼Œå‡è¨­å·²æ›¿æ›) ...
            phase1: {
                title: "Phase 1: ä¸‰è—©å¸‚æ¼«éŠèˆ‡NBA",
                days: [
                    { date: "2/26 (å››)", loc: "èˆŠé‡‘å±±", act: "æŠµé”èˆ‡æ™‚å·®èª¿é©", detail: "21:15 SFO æŠµé”ã€å‰å¾€ Riu Plaza Fisherman's Wharfã€ä¼‘æ¯èª¿é©æ™‚å·®ã€‚", transport: "Shared Shuttle æˆ– Uber/Lyft (è²»ç”¨è¼ƒé«˜ä½†æœ€æ–¹ä¾¿)ã€‚", hotel: "Riu Plaza Fisherman's Wharf" },
                    { date: "2/27 (äº”)", loc: "èˆŠé‡‘å±±", act: "æƒ¡é­”å³¶èˆ‡åŸå¸‚ç²¾è¯", detail: "ä¸Šåˆï¼šæƒ¡é­”å³¶åƒè§€ã€‚<br>åˆé¤ï¼šæ¼äººç¢¼é ­<br>ä¸‹åˆï¼šLombard Street (çºœè»Šé«”é©—)ã€å‰å¾€è—è¡“å®®ã€‚<br>æ™šé¤<br>æ™šä¸Šï¼šè—è¡“å®®æ¹–ç•”æ¬£è³å¤•é™½ã€è¿”å›é£¯åº—ã€‚", transport: "æƒ¡é­”å³¶ï¼šç¢¼é ­æ­¥è¡Œã€‚ä¹æ›²èŠ±è¡—/è—è¡“å®®ï¼š Powell-Hyde çºœè»Š ğŸš‹ã€‚", attractionKey: "æƒ¡é­”å³¶ Alcatraz", hotel: "Riu Plaza Fisherman's Wharf" }, 
                    { date: "2/28 (å…­)", loc: "èˆŠé‡‘å±±", act: "NBA è³½äº‹æ—¥", detail: "ä¸Šåˆï¼šæ‚ é–’æ—©åˆé¤ã€Ferry Building æ•£æ­¥ã€‚<br>ä¸‹åˆï¼šå‰å¾€ Chase Center å‘¨é‚Šç”¨æ™šé¤ã€‚<br>åˆæ™šé¤<br>æ™šä¸Šï¼š17:30 è§€è³ NBA å‹‡å£«éšŠ vs æ¹–äººéšŠã€‚", transport: "Ferry Buildingï¼š MUNI å·´å£«ã€‚Chase Centerï¼š MUNI T-Line è¼•è»Œç›´é”ã€‚è³½å¾Œï¼š MUNI æˆ– Uber/Lyft å›é£¯åº—ã€‚", attractionKey: "Chase Center", hotel: "Riu Plaza Fisherman's Wharf" },
                    { date: "3/1 (æ—¥)", loc: "èˆŠé‡‘å±±/å‘¨é‚Š", act: "å…§é™¸è‡ªç„¶æ¢ç´¢ (å„ªå‹ç¾åœ°)", detail: "<strong>06:30 â€“ 07:30</strong> èˆŠé‡‘å±±å¸‚å€ä¸Šè»Š (è¦–åœ°é»è€Œå®šï¼Œè«‹æº–æ™‚)<br><strong>07:30 â€“ 11:30</strong> ä¹˜è»Šå‰å¾€å„ªå‹ç¾åœ° (ä¸­é€”ä¼‘æ¯ 20-30 åˆ†)<br><strong>11:30 â€“ 12:00</strong> æŠµé”åœ‹å®¶å…¬åœ’ (ç¶“å—å´æˆ–è¥¿å´å…¥å£)<br><strong>12:00 â€“ 16:30</strong> å„ªå‹ç¾åœ°è°·æ·±åº¦æ¢ç´¢ (è‡ªç”±åˆé¤)<br><strong>16:30 â€“ 17:00</strong> è§€è³ Tunnel View (é‡é»è§€æ™¯å°)<br><strong>17:00 â€“ 21:30</strong> è¿”å›èˆŠé‡‘å±± (ä¸­é€”ä¼‘æ¯ï¼Œæ™šé¤æ™‚æ®µæŠµé”)", transport: "æ—…è¡Œç¤¾æä¾›äº¤é€šè»Šã€‚", attractionKey: "é…‹é•·å²© El Capitan", hotel: "Riu Plaza Fisherman's Wharf" },
                    { date: "3/2 (ä¸€)", loc: "èˆŠé‡‘å±±", act: "åŸå¸‚æ–‡åŒ–å·¡ç¦®", detail: "ä¸Šåˆï¼šè¯åˆå»£å ´é€›è¡—ã€å‰å¾€å”äººè¡—åˆé¤ã€‚ä¸‹åˆï¼šæ­è»Šå‰å¾€é‡‘é–€å¤§æ©‹åŒ—é‚Š Vista Point æ‹ç…§ã€‚æ™šä¸Šï¼šé †è·¯å›ç¨‹ç¶“ Crissy Fieldã€æ™šé¤ã€è‡ªç”±æ´»å‹•ã€‚", transport: "çºœè»Š/å”äººè¡—ï¼š Powell-Mason çºœè»Š ğŸš‹ã€‚é‡‘é–€å¤§æ©‹ï¼š å¾å”äººè¡—æ­ Uber/Lyft ç›´é”ã€‚", attractionKey: "é‡‘é–€å¤§æ©‹ Golden Gate", hotel: "Riu Plaza Fisherman's Wharf" }
                ]
            },
            phase2: { /* ... */ },
            phase3: { /* ... */ }
        };
        
        let attractionMap = {}; // æ™¯é»å¿«é€ŸæŸ¥æ‰¾åœ°åœ–
        let currentPhase = 'phase1'; // è¡Œç¨‹ç•¶å‰éšæ®µç‹€æ…‹
        
        // --- è¼”åŠ©å‡½æ•¸ ---
        
        // 1. å°è¦½åˆ—æ²å‹•
        const scrollToSection = (id) => {
            document.getElementById(id).scrollIntoView({ behavior: 'smooth' });
        };
        
        // 2. åˆå§‹åŒ–æ™¯é»åœ°åœ– (ç”¨æ–¼å¿«é€ŸæŸ¥æ‰¾)
        const initAttractionMap = () => {
            attractionMap = attractions.reduce((map, attraction) => {
                map[attraction.name] = attraction;
                return map;
            }, {});
        };
        
        // --- æ¸²æŸ“å‡½æ•¸ ---
        
        // 3. ä½å®¿ç¸½çµæ¸²æŸ“
        const renderAccommodationSummary = () => {
            const container = document.getElementById('accommodation-content');
            if (!container) return; 
        
            const accommodations = Object.values(accommodationData);
            const html = accommodations.map(acc => `
                <article class="bg-gray-50 p-4 rounded-xl border border-gray-100 card-hover">
                    <h4 class="font-bold text-gray-900 flex items-center mb-1">
                        <span class="text-xl mr-2" aria-hidden="true">${acc.icon}</span>
                        ${acc.name}
                    </h4>
                    <p class="text-xs text-gray-500 mb-2">${acc.city} Â· ${acc.dates}</p>
                    <p class="text-sm text-gray-700">${acc.address}</p>
                    <p class="text-sm font-medium mt-2 ${acc.status.includes('å·²ç¢ºèª') ? 'text-green-600' : 'text-orange-600'}">
                        ${acc.status}
                    </p>
                    <a href="${acc.mapLink}" target="_blank" class="text-xs text-blue-500 hover:text-blue-700 mt-1 inline-block">
                        æŸ¥çœ‹åœ°åœ– â†—
                    </a>
                </article>
            `).join('');
        
            container.innerHTML = html;
        };
        
        // 4. èˆªç­ä¿¡æ¯æ¸²æŸ“å·¥å…·
        const generateFlightHTML = (data) => {
            return data.map(flight => `
                <div class="flex items-center space-x-4 border-b pb-3">
                    <div class="text-center">
                        <div class="text-2xl text-gray-700">${flight.leg.split(' âœ ')[0]}</div>
                        <div class="text-sm text-gray-500">å‡ºç™¼</div>
                    </div>
                    <div class="flex-grow text-center">
                        <div class="text-xs font-medium text-gray-500 mb-1">${flight.note}</div>
                        <div class="flex items-center justify-center">
                            <span class="text-sm font-semibold">${flight.number}</span>
                            <svg class="w-4 h-4 mx-2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg>
                        </div>
                    </div>
                    <div class="text-center">
                        <div class="text-2xl text-gray-700">${flight.leg.split(' âœ ')[1]}</div>
                        <div class="text-sm text-gray-500">æŠµé”</div>
                    </div>
                </div>
                <div class="text-sm text-gray-600 mt-2 text-center">
                    ${flight.date} <span class="text-gray-400">|</span> æŠµé”æ™‚é–“: ${flight.arr}
                </div>
            `).join('');
        };
        
        // 5. è¡Œç¨‹è©³æƒ… HTML ç”Ÿæˆ
        const generateItineraryDetailHTML = (days) => {
            return days.map((day, index) => {
                const relatedAttraction = day.attractionKey ? attractionMap[day.attractionKey] : null;
        
                return `
                    <div class="border-b border-gray-100 last:border-b-0 pb-6 animate-fade-in">
                        <div class="flex items-center space-x-3 mb-3">
                            <div class="w-8 h-8 flex items-center justify-center text-sm font-bold rounded-full bg-yellow-100 text-yellow-800 flex-shrink-0">
                                Day ${index + 1}
                            </div>
                            <div>
                                <h4 class="text-lg font-bold text-gray-900">${day.date} - ${day.loc}</h4>
                                <p class="text-sm text-gray-500">${day.act}</p>
                            </div>
                        </div>
                        
                        <div class="ml-10 space-y-3">
                            <div class="bg-gray-50 p-3 rounded-lg text-sm">
                                <p class="font-medium text-gray-700 mb-1">è¡Œç¨‹ç´°ç¯€:</p>
                                <p class="text-gray-600">${day.detail}</p>
                            </div>
        
                            <p class="text-sm text-gray-700"><strong>äº¤é€šï¼š</strong> ${day.transport}</p>
                            <p class="text-sm text-gray-700"><strong>ä½å®¿ï¼š</strong> ${day.hotel}</p>
        
                            ${relatedAttraction ? `
                                <div class="mt-4 p-3 bg-blue-50 border-l-4 border-blue-300 rounded-r-lg">
                                    <h5 class="text-sm font-bold text-blue-800 flex items-center mb-1">
                                        <span class="text-xl mr-2" aria-hidden="true">${relatedAttraction.icon}</span>
                                        æ™¯é»äº®é»ï¼š
                                        <a href="${relatedAttraction.url}" target="_blank" class="ml-2 text-blue-500 hover:text-blue-700 attraction-link">
                                            ${relatedAttraction.name} â†—
                                        </a>
                                    </h5>
                                    <p class="text-xs text-blue-700">${relatedAttraction.short_desc}</p>
                                </div>
                            ` : ''}
                        </div>
                    </div>
                `;
            }).join('');
        };
        
        // 6. æ™¯é»å¡ç‰‡ HTML ç”Ÿæˆ
        const generateAttractionCardHTML = (attraction) => `
            <a href="${attraction.url}" target="_blank" class="attraction-card bg-white rounded-xl shadow-lg p-5 border border-gray-100 card-hover block transition-all" data-filter="${attraction.city}" title="${attraction.desc}">
                <div class="flex items-start">
                    <div class="text-3xl mr-4 flex-shrink-0" aria-hidden="true">${attraction.icon}</div>
                    <div>
                        <h4 class="text-xl font-bold text-gray-900 mb-1">${attraction.name}</h4>
                        <p class="text-sm text-gray-500 uppercase font-medium">${attraction.city} Â· ${attraction.type}</p>
                    </div>
                </div>
                <p class="text-sm text-gray-600 mt-3">${attraction.short_desc}</p>
                <div class="mt-4 text-right text-xs text-blue-500 hover:text-blue-700">äº†è§£æ›´å¤š â†—</div>
            </a>
        `;
        
        // --- äº’å‹•å‡½æ•¸ ---
        
        // 7. èˆªç­åˆ‡æ›é‚è¼¯
        const switchFlightTab = (type) => {
            const content = document.getElementById('flight-content');
            const outboundBtn = document.getElementById('btn-outbound');
            const inboundBtn = document.getElementById('btn-inbound');
            const isOutbound = (type === 'outbound');
        
            // è™•ç†æŒ‰éˆ• Active ç‹€æ…‹
            const activeClasses = ['bg-white', 'shadow', 'text-gray-900'];
            const inactiveClasses = ['text-gray-500', 'hover:text-gray-900'];
        
            if (isOutbound) {
                outboundBtn.classList.add(...activeClasses);
                outboundBtn.classList.remove(...inactiveClasses);
                inboundBtn.classList.remove(...activeClasses);
                inboundBtn.classList.add(...inactiveClasses);
                content.innerHTML = generateFlightHTML(flightData.outbound);
            } else {
                inboundBtn.classList.add(...activeClasses);
                inboundBtn.classList.remove(...inactiveClasses);
                outboundBtn.classList.remove(...activeClasses);
                outboundBtn.classList.add(...inactiveClasses);
                content.innerHTML = generateFlightHTML(flightData.inbound);
            }
        };
        
        // 8. è¡Œç¨‹éšæ®µåˆ‡æ›é‚è¼¯
        const renderItinerary = (phase) => {
            currentPhase = phase;
            const detailsContainer = document.getElementById('itinerary-details');
            const phaseData = itineraryData[phase];
        
            // æ¸…é™¤æ‰€æœ‰æŒ‰éˆ•çš„ active ç‹€æ…‹
            ['phase1', 'phase2', 'phase3'].forEach(p => {
                const navButton = document.getElementById(`nav-${p}`);
                const color = p === 'phase1' ? 'blue' : p === 'phase2' ? 'yellow' : 'purple';
                
                // ç§»é™¤ active æ¨£å¼
                navButton.classList.remove(`border-${color}-500`, 'bg-white', 'shadow-sm');
                // ç¢ºä¿ hover æ¨£å¼å­˜åœ¨
                navButton.classList.add('border-transparent', `hover:border-${color}-500`, `hover:bg-${color}-50`);
            });
        
            // è¨­ç½®ç•¶å‰æŒ‰éˆ•çš„ active ç‹€æ…‹
            const currentNav = document.getElementById(`nav-${phase}`);
            const activeColor = phase === 'phase1' ? 'blue' : phase === 'phase2' ? 'yellow' : 'purple';
            currentNav.classList.add(`border-${activeColor}-500`, 'bg-white', 'shadow-sm');
            currentNav.classList.remove('border-transparent', `hover:border-${activeColor}-500`, `hover:bg-${activeColor}-50`);
        
            // æ¸²æŸ“å…§å®¹
            detailsContainer.innerHTML = generateItineraryDetailHTML(phaseData.days);
        };
        
        // 9. æ™¯é»ç¯©é¸é‚è¼¯
        const filterAttractions = (filter) => {
            // æ›´æ–°æŒ‰éˆ•æ¨£å¼
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active-filter', 'bg-gray-800', 'text-white', 'shadow-md');
                if (btn.dataset.filter === filter) {
                    btn.classList.add('active-filter', 'bg-gray-800', 'text-white', 'shadow-md');
                } else {
                    // ç¢ºä¿é active æŒ‰éˆ•å›æ­¸æ¨™æº–æ¨£å¼
                    btn.classList.add('bg-white', 'text-gray-600', 'border', 'border-gray-200');
                }
            });
        
            const filtered = filter === 'all' 
                ? attractions 
                : attractions.filter(att => att.city === filter);
            
            document.getElementById('attraction-grid').innerHTML = filtered.map(generateAttractionCardHTML).join('');
        };
        
        // --- åˆå§‹åŒ– (IIFE) ---
        
        // å‡è¨­ initChart å’Œ fetchWeatherData å‡½æ•¸å·²å­˜åœ¨ä¸¦è² è²¬å¤©æ°£åœ–è¡¨å’Œé å ±
        // const initChart = () => { /* ... */ };
        // const fetchWeatherData = () => { /* ... */ }; 
        
        document.addEventListener('DOMContentLoaded', () => {
            // æ•¸æ“šåˆå§‹åŒ–
            initAttractionMap();
        
            // é è¨­æ¸²æŸ“
            switchFlightTab('outbound');
            renderAccommodationSummary();
            renderItinerary('phase1');
            filterAttractions('all');
        
            // åˆå§‹åŒ– Chart.js åœ–è¡¨ (è«‹ç¢ºä¿ initChart å‡½æ•¸å·²å®šç¾©)
            // if (typeof initChart === 'function') {
            //     initChart();
            // }
            
            // ç²å–å¤©æ°£æ•¸æ“š (è«‹ç¢ºä¿ fetchWeatherData å‡½æ•¸å·²å®šç¾©)
            // if (typeof fetchWeatherData === 'function') {
            //     fetchWeatherData();
            // }
        });
        </script>
</body>
</html>
